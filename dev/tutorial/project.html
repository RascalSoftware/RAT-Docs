
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The Project Class &#8212; RAT  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=9deae167" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=881e7dcd"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorial/project';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.2';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://rascalsoftware.github.io/RAT-Docs/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="A Closer Look at the Controls Class" href="controls.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="RAT  documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="RAT  documentation - Home"/>`);</script>
  
  
</a></div>
    
      <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../index.html">
                        Home
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../guide.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../index.html">
                        Home
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../guide.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Tutorial</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">The Project Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="controls.html">A Closer Look at the Controls Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="bayes.html">Bayesian Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="customModels.html">Custom Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="savingOutputs.html">Copying and Saving Outputs</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../matlab_examples/index.html">MATLAB Examples</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/DSPC_standard_layers.html">DSPC Standard Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/DSPC_custom_layers.html">DSPC Custom Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/DSPC_custom_XY.html">DSPC Custom XY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/domains_standard_layers.html">Incoherent Summing with Standard Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/domains_custom_layers.html">Incoherent Summing with Custom Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/domains_custom_XY.html">Incoherent Summing with Custom XY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/imaginary.html">Absorption (Imaginary SLD) Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/convert_r1_project.html">Converting a RasCAL-1 Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab_examples/custom_model_languages.html">Alternative Custom Model Languages</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python_examples/index.html">Python Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/DSPC_standard_layers.html">Standard Layers Analysis of a DSPC Floating Bilayer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/DSPC_custom_layers.html">Custom Layers Example for Supported DSPC layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/DSPC_custom_xy.html">Custom XY Example for Supported DSPC layer.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/domains_standard_layers.html">Domains Samples Using Standard Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/domains_custom_layers.html">Analysing Domains Samples Using Custom Layers Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/domains_custom_XY.html">Simple example of a layer containing domains using a custom XY model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/absorption.html">Absorption (imaginary SLD) - effect below the critical edge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/convert_rascal.html">RasCAL-1 to RAT</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../algorithms/index.html">Algorithms</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/simplex.html">Nelder-Mead Simplex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/DE.html">Differential Evolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/DREAM.html">Bayesian Analysis - DREAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/nestedSampling.html">Bayesian Model Selection - Nested Sampling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../advanced/index.html">Advanced Topics</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced/resampling.html">Profile Resampling (‘microslicing’)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/parallelisation.html">Parallelising Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/customLanguages.html">Custom Models in Python or C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/events.html">Handling Events During Calculations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../calcTypes/index.html">Different Calculation Types</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../calcTypes/imaginary.html">Adding the Imaginary Refractive Index</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../calcTypes/domains.html">Incoherent Summing (Domains)</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../calcTypes/domainsStandardLayers.html">Standard Layers Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../calcTypes/domainsCustomModels.html">Custom Models with Domains</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../utilities/index.html">Utility Functions</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../utilities/plotFuncs.html">Basic Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/bayesPlot.html">Plotting Bayesian Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/livePlot.html">Live Updating Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/conversionFuncs.html">Convert between RAT and RasCAL-1</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../guide.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Tutorial</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">The Project Class</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="the-project-class">
<span id="project"></span><h1>The Project Class<a class="headerlink" href="#the-project-class" title="Link to this heading">#</a></h1>
<p>In the previous section, we saw an example of how we set up and run an analysis using RAT.
Every call to the toolbox has two parts: the <strong>Project</strong> object, where we define the model,
add the data and define our contrasts, and the <strong>Controls</strong> object where we tell the toolbox
what type of analysis we would like to do. The reason for splitting things up in this way is that
once our model is defined, we can interact with it in various ways without needing to modify the model.
So we can try out different types of analysis and explore the landscape of solutions
by simply modifying the <strong>Controls</strong> object, leaving the <strong>Project</strong> object alone.</p>
<p>As well as having two inputs, RAT always provides two outputs, so the call to the toolbox is always of this form:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-0">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">problem</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">RAT</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span><span class="w"> </span><span class="n">controls</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-1">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">controls</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In this case we have called our inputs <code class="docutils literal notranslate"><span class="pre">problem</span></code> and <code class="docutils literal notranslate"><span class="pre">controls</span></code>, and we have called our outputs <code class="docutils literal notranslate"><span class="pre">problem</span></code> and <code class="docutils literal notranslate"><span class="pre">results</span></code>,
but we are free to call them anything we like. We will look at the outputs in more detail in the next section.</p>
<p>The first input, <code class="docutils literal notranslate"><span class="pre">problem</span></code>, is an instance of the <strong>Project</strong> class:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-2">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">empty_problem</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">createProject</span><span class="p">(</span><span class="n">name</span><span class="p">=</span><span class="s">&#39;my project&#39;</span><span class="p">);</span>
<span class="o">&gt;&gt;</span><span class="w"> </span><span class="nb">class</span><span class="p">(</span><span class="n">empty_problem</span><span class="p">)</span>

<span class="nb">ans</span><span class="w"> </span><span class="p">=</span>
<span class="w">    </span><span class="s">&#39;projectClass&#39;</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-3">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">empty_problem</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;my project&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">empty_problem</span><span class="p">)</span>

<span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">RAT</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">Project</span><span class="s1">&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
<p>The structure of the class is a collection of settings and tables defining things like calculation type,
model type, parameters, data, contrasts, and so on. These define all we need for our analysis.</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-4">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>         modelType: &#39;standard layers&#39;
    experimentName: &#39;my project&#39;
          geometry: &#39;air/substrate&#39;


    Parameters: ---------------------------------------------------------------------------------------------- 

    p            Name             Min    Value    Max    Fit? 
    _    _____________________    ___    _____    ___    _____

    1    &quot;Substrate Roughness&quot;     1       3       5     true 


    Bulk In: -------------------------------------------------------------------------------------------------- 

    p      Name       Min    Value    Max    Fit? 
    _    _________    ___    _____    ___    _____

    1    &quot;SLD Air&quot;     0       0       0     false


    Bulk Out: ------------------------------------------------------------------------------------------------- 

    p      Name         Min       Value        Max       Fit? 
    _    _________    _______    ________    ________    _____

    1    &quot;SLD D2O&quot;    6.2e-06    6.35e-06    6.35e-06    false


    Scalefactors: ------------------------------------------------------------------------------------------------- 

    p         Name          Min     Value    Max     Fit? 
    _    _______________    ____    _____    ____    _____

    1    &quot;Scalefactor 1&quot;    0.02    0.23     0.25    false


    Backgrounds: ----------------------------------------------------------------------------------------------- 

    (a) Background Parameters: 

    p            Name             Min     Value     Max     Fit? 
    _    ____________________    _____    _____    _____    _____

    1    &quot;Background Param 1&quot;    1e-07    1e-06    1e-05    false

    (b) Backgrounds:  

    p         Name            Type              Source           Value 1    Value 2    Value 3    Value 4    Value 5
    _    ______________    __________    ____________________    _______    _______    _______    _______    _______

    1    &quot;Background 1&quot;    &quot;constant&quot;    &quot;Background Param 1&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   


    Resolutions: --------------------------------------------------------------------------------------------- 

    (a) Resolutions Parameters: 

    p           Name           Min     Value    Max     Fit? 
    _    __________________    ____    _____    ____    _____

    1    &quot;Resolution par 1&quot;    0.01    0.03     0.05    false

    (b) Resolutions:  

    p         Name            Type             Source          Value 1    Value 2    Value 3    Value 4    Value 5
    _    ______________    __________    __________________    _______    _______    _______    _______    _______

    1    &quot;Resolution 1&quot;    &quot;constant&quot;    &quot;Resolution par 1&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   


    Layers: -------------------------------------------------------------------------------------------------- 

    Name    Thickness    SLD    Roughness    Hydration    Hydrate with
    ____    _________    ___    _________    _________    ____________

     &quot;&quot;        &quot;&quot;        &quot;&quot;        &quot;&quot;           &quot;&quot;             &quot;&quot;     


    Custom Files: ------------------------------------------------------------------------------------------------------ 

    Name    Filename    Function Name    Language    Path
    ____    ________    _____________    ________    ____

     &quot;&quot;        &quot;&quot;            &quot;&quot;             &quot;&quot;        &quot;&quot; 


    Data: ------------------------------------------------------------------------------------------------------ 

        Name          Data       Data Range      Simulation Range   
    ____________    _________    __________    _____________________

    &quot;Simulation&quot;    &quot;No Data&quot;       &quot;-&quot;        &quot;[ 0.0050 , 0.7000 ]&quot;


   Contrasts: ----------------------------------------------------------------------------------------------- 

             p         
    ___________________

    &quot;Name&quot;             
    &quot;Data&quot;             
    &quot;Background&quot;       
    &quot;Background Action&quot;
    &quot;Bulk in&quot;          
    &quot;Bulk out&quot;         
    &quot;Scalefactor&quot;      
    &quot;Resolution&quot;       
    &quot;Resample&quot;         
    &quot;Repeat Layers&quot;    
    &quot;Model&quot;            
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-5">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Name: ----------------------------------------------------------------------------------------------

my project

Calculation: ---------------------------------------------------------------------------------------

normal

Model: ---------------------------------------------------------------------------------------------

standard layers

Geometry: ------------------------------------------------------------------------------------------

air/substrate

Parameters: ----------------------------------------------------------------------------------------

+-------+---------------------+-----+-------+-----+------+
| index |         name        | min | value | max | fit  |
+-------+---------------------+-----+-------+-----+------+
|   0   | Substrate Roughness | 1.0 |  3.0  | 5.0 | True |
+-------+---------------------+-----+-------+-----+------+

Bulk In: -------------------------------------------------------------------------------------------

+-------+---------+-----+-------+-----+-------+
| index |   name  | min | value | max |  fit  |
+-------+---------+-----+-------+-----+-------+
|   0   | SLD Air | 0.0 |  0.0  | 0.0 | False |
+-------+---------+-----+-------+-----+-------+

Bulk Out: ------------------------------------------------------------------------------------------

+-------+---------+---------+----------+----------+-------+
| index |   name  |   min   |  value   |   max    |  fit  |
+-------+---------+---------+----------+----------+-------+
|   0   | SLD D2O | 6.2e-06 | 6.35e-06 | 6.35e-06 | False |
+-------+---------+---------+----------+----------+-------+

Scalefactors: --------------------------------------------------------------------------------------

+-------+---------------+------+-------+------+-------+
| index |      name     | min  | value | max  |  fit  |
+-------+---------------+------+-------+------+-------+
|   0   | Scalefactor 1 | 0.02 |  0.23 | 0.25 | False |
+-------+---------------+------+-------+------+-------+

Background Parameters: -----------------------------------------------------------------------------

+-------+--------------------+-------+-------+-------+-------+
| index |        name        |  min  | value |  max  |  fit  |
+-------+--------------------+-------+-------+-------+-------+
|   0   | Background Param 1 | 1e-07 | 1e-06 | 1e-05 | False |
+-------+--------------------+-------+-------+-------+-------+

Backgrounds: ---------------------------------------------------------------------------------------

+-------+--------------+----------+--------------------+
| index |     name     |   type   |       source       |
+-------+--------------+----------+--------------------+
|   0   | Background 1 | constant | Background Param 1 |
+-------+--------------+----------+--------------------+

Resolution Parameters: -----------------------------------------------------------------------------

+-------+--------------------+------+-------+------+-------+
| index |        name        | min  | value | max  |  fit  |
+-------+--------------------+------+-------+------+-------+
|   0   | Resolution Param 1 | 0.01 |  0.03 | 0.05 | False |
+-------+--------------------+------+-------+------+-------+

Resolutions: ---------------------------------------------------------------------------------------

+-------+--------------+----------+--------------------+
| index |     name     |   type   |       source       |
+-------+--------------+----------+--------------------+
|   0   | Resolution 1 | constant | Resolution Param 1 |
+-------+--------------+----------+--------------------+

Data: ----------------------------------------------------------------------------------------------

+-------+------------+------+------------+------------------+
| index |    name    | data | data range | simulation range |
+-------+------------+------+------------+------------------+
|   0   | Simulation |  []  |     []     |   [0.005, 0.7]   |
+-------+------------+------+------------+------------------+
</pre></div>
</div>
</div>
</div>
<p>In the following sections, we will look at how to build a standard layer slab model with this class. It is also
possible to define a custom model using a function; this is seen in the <a class="reference internal" href="customModels.html#custommodels"><span class="std std-ref">Custom Models</span></a> tutorial.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have a model from RasCAL-1, this model can be imported as a RAT project. See the following example
pages for how to do this in <a class="reference internal" href="../matlab_examples/convert_r1_project.html#convertr1matlab"><span class="std std-ref">MATLAB</span></a> and <a class="reference internal" href="../python_examples/notebooks/convert_rascal.html#convert-rascalipynb"><span class="std std-ref">Python</span></a>.</p>
</div>
<p>When we run RAT, the first of the two outputs is another <strong>Project</strong>, but updated with the results of the calculation.
So, if we run a fit, the fitted parameters will be updated with the best fit values of our procedure.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-6">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">outputProblem</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">RAT</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span><span class="w"> </span><span class="n">controls</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-7">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">output_problem</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">controls</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The second output is a class containing the simulated reflectivities, SLDs and so on
using the parameters from the procedure given in the <strong>Controls</strong> object:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-8">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>          reflectivity: {2x1 cell}
            simulation: {2x1 cell}
           shiftedData: {2x1 cell}
           backgrounds: {2x1 cell}
           resolutions: {2x1 cell}
           sldProfiles: {2x1 cell}
                layers: {2x1 cell}
       resampledLayers: {2x1 cell}
    calculationResults: [1x1 struct]
        contrastParams: [1x1 struct]
             fitParams: [3 20 11 5 5 6.0000e-06 -4.0000e-07 ... ] (1x15 double)
              fitNames: {15x1 cell}
</pre></div>
</div>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-9">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>reflectivity = [Data array: [51 x 2], Data array: [51 x 2]],
simulation = [Data array: [51 x 2], Data array: [51 x 2]],
shiftedData = [Data array: [51 x 3], Data array: [51 x 3]],
backgrounds = [Data array: [51 x 3], Data array: [51 x 3]],
resolutions = [Data array: [51 x 2], Data array: [51 x 2]],
layerSlds = [[Data array: [2 x 3]], [Data array: [2 x 3]]],
sldProfiles = [[Data array: [182 x 2]], [Data array: [182 x 2]]],
resampledLayers = [[Data array: [1 x 3]], [Data array: [1 x 3]]],
calculationResults = CalculationResults(
	chiValues = [278.33456632 463.11454139],
	sumChi = 741.4491077056697,
),
contrastParams = ContrastParams(
	scalefactors = [0.23 0.23],
	bulkIn = [0. 0.],
	bulkOut = [ 6.35e-06 -5.60e-07],
	subRoughs = [3. 3.],
	resample = [0. 0.],
),
fitParams = [ 3.00e+00  2.00e+01  1.10e+01  5.00e+00  5.00e+00  6.00e-06 -4.00e-07
  3.00e-06  1.40e-06  3.00e-01  5.50e-06  2.80e-06  2.30e-01  6.35e-06
 -5.60e-07],
fitNames = [&#39;Substrate Roughness&#39;, &#39;Tails Thickness&#39;, &#39;Heads Thickness&#39;, &#39;Tails Roughness&#39;, &#39;Heads Roughness&#39;, &#39;Deuterated Tails SLD&#39;, &#39;Hydrogenated Tails SLD&#39;, &#39;Deuterated Heads SLD&#39;, &#39;Hydrogenated Heads SLD&#39;, &#39;Heads Hydration&#39;, &#39;Backs Value ACMW&#39;, &#39;Backs Value D2O&#39;, &#39;Scalefactor 1&#39;, &#39;SLD D2O&#39;, &#39;SLD ACMW&#39;],
</pre></div>
</div>
</div>
</div>
<p>In the following sections, we will discuss the methods of the <strong>Project</strong> class, and see how they allow us to build up a model by populating the various sections.</p>
<section id="the-components-of-the-project-class">
<h2>The Components of the Project Class<a class="headerlink" href="#the-components-of-the-project-class" title="Link to this heading">#</a></h2>
<section id="project-defining-methods">
<h3>Project Defining Methods<a class="headerlink" href="#project-defining-methods" title="Link to this heading">#</a></h3>
<p>The first step is always to create an instance of the <strong>Project</strong> class to hold our model.</p>
<p>This is always done by calling the project creation routine and assigning it to our variable name
(we will mostly use <code class="docutils literal notranslate"><span class="pre">problem</span></code> in this manual), which always requires a name for our project as an input:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-10">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">createProject</span><span class="p">(</span><span class="n">name</span><span class="p">=</span><span class="s">&#39;My Problem&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-11">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="s1">&#39;My Problem&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This creates an instance of <strong>Project</strong>, assigns it to the variable <code class="docutils literal notranslate"><span class="pre">problem</span></code>, and gives it the title ‘My Problem’.</p>
<p>The first part of the created <code class="docutils literal notranslate"><span class="pre">problem</span></code> has two other fields: <strong>Model Type</strong> and <strong>Geometry</strong>.</p>
<ul class="simple">
<li><p><strong>Geometry</strong>: This can be set to either <code class="docutils literal notranslate"><span class="pre">&quot;air/substrate&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;substrate/liquid&quot;</span></code> as below.</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-12" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-12">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">geometry</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;air/substrate&#39;</span><span class="p">;</span>
<span class="n">problem</span><span class="p">.</span><span class="n">geometry</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;substrate/liquid&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-13" name="sd-tab-set-6" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-13">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">geometry</span> <span class="o">=</span> <span class="s1">&#39;air/substrate&#39;</span>
<span class="n">problem</span><span class="o">.</span><span class="n">geometry</span> <span class="o">=</span> <span class="s1">&#39;substrate/liquid&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>The effect of this parameter is in the numbering of roughness values in layer models. In any model for n-layers,
there are always n+1 associated interfaces, and hence n+1 roughness parameters required. In RAT, the bulk interface roughness
is a protected parameter called <code class="docutils literal notranslate"><span class="pre">&quot;Substrate</span> <span class="pre">Roughness&quot;</span></code> which always exists.
The <strong>Geometry</strong> field controls where this roughness is placed in the layer stack. So, for two layers defined with thickness,
SLD and roughness <span class="math notranslate nohighlight">\([d_1, \rho_1, \sigma_1]\)</span> and <span class="math notranslate nohighlight">\([d_2, \rho_2, \sigma_2]\)</span>,
then for the <code class="docutils literal notranslate"><span class="pre">&quot;substrate/liquid&quot;</span></code> geometry the substrate roughness is placed as the first roughness the beam meets,
and the layer roughness values refer to the interface after the particular layer.
But in the <code class="docutils literal notranslate"><span class="pre">&quot;air/substrate&quot;</span></code> case, the opposite is true,
and the substrate roughness is the last roughness in the stack, with the layer roughness referring to the interface before each layer.</p>
<ul>
<li><p><strong>Model Type</strong>: There are three ways of defining models in RAT:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Standard Layers</strong> - The model is defined in terms of parameters, which are distributed into layers, and subsequently grouped into contrasts.
No external functions are needed.</p></li>
<li><p><strong>Custom Layers</strong> - Parameters are again defined and grouped into layers, but this time the layer definitions come from a user model script.
This then gives complete flexibility of how layers are defined, so allowing models to be written in terms of area per molecule or material density,
for example. This custom script controls translating these input parameters into a <span class="math notranslate nohighlight">\([d, \rho, \sigma]\)</span> (thickness, SLD, roughness) model.
This is probably the most useful operating mode for RasCAL.</p></li>
<li><p><strong>Custom XY-Profile</strong> - This modelling mode also relies on a custom model function,
but in this case does away with <span class="math notranslate nohighlight">\([d, \rho, \sigma]\)</span> layers completely.
Instead, the custom function uses the parameters to define a continuous SLD profile, which RAT then uses to calculate the reflectivity.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This tutorial just deals with standard layers. For information on the other model types, see <a class="reference internal" href="customModels.html#customlayers"><span class="std std-ref">Custom Layers Models</span></a>.</p>
</div>
<p>The model type of the project can be changed as follows:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-14" name="sd-tab-set-7" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-14">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">modelType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;standard layers&#39;</span><span class="p">;</span>
<span class="n">problem</span><span class="p">.</span><span class="n">modelType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;custom layers&#39;</span><span class="p">;</span>
<span class="n">problem</span><span class="p">.</span><span class="n">modelType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;custom XY&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-15" name="sd-tab-set-7" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-15">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;standard layers&#39;</span>
<span class="n">problem</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;custom layers&#39;</span>
<span class="n">problem</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;custom XY&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Custom modelling is described in more depth in a <a class="reference internal" href="customModels.html#custommodels"><span class="std std-ref">later section</span></a>.</p>
</section>
<section id="the-parameters-block">
<h3>The Parameters Block<a class="headerlink" href="#the-parameters-block" title="Link to this heading">#</a></h3>
<p>The parameters block outlines the material parameters of our model, such as thickness, SLD or roughness.
These parameters are specified by a name, a value, minimum and maximum ranges,
and a flag defining whether the parameter is fitted or fixed:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-16" name="sd-tab-set-8" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-16">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p            Name             Min    Value    Max    Fit? 
    _    _____________________    ___    _____    ___    _____

    1    &quot;Substrate Roughness&quot;     1       3       5     true 
</pre></div>
</div>
</div>
<input id="sd-tab-item-17" name="sd-tab-set-8" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-17">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+---------------------+-----+-------+-----+------+
| index |         name        | min | value | max | fit  |
+-------+---------------------+-----+-------+-----+------+
|   0   | Substrate Roughness | 1.0 |  3.0  | 5.0 | True |
+-------+---------------------+-----+-------+-----+------+
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;Substrate</span> <span class="pre">Roughness&quot;</span></code> is a protected parameter in all cases (it defines the Fresnel roughness) and cannot be renamed or deleted.
Its value and ranges can however be set to any numerical values.</p>
<p>To add a parameter, you can just specify a name, in which case the parameter takes on default values, or specify the whole parameter at once:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-18" name="sd-tab-set-9" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-18">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addParameter</span><span class="p">(</span><span class="s">&#39;My new param&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addParameter</span><span class="p">(</span><span class="s">&#39;My other new param&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="nb">false</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-19" name="sd-tab-set-9" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-19">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My new param&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My other new param&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>To avoid having to make a whole load of statements for large projects with many parameters, you can define them at once in an array, and add them as a group:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-20" name="sd-tab-set-10" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-20">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">pGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{{</span><span class="s">&#39;Layer thick&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">};</span>
<span class="w">          </span><span class="p">{</span><span class="s">&#39;Layer SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">3e-6</span><span class="w"> </span><span class="mf">5e-6</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">};</span>
<span class="w">          </span><span class="p">{</span><span class="s">&#39;Layer rough&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">}};</span>

<span class="n">problem</span><span class="p">.</span><span class="n">addParameterGroup</span><span class="p">(</span><span class="n">pGroup</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-21" name="sd-tab-set-10" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-21">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">pGroup</span> <span class="o">=</span> <span class="p">[</span><span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layer thick&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
          <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layer SLD&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">3e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">5e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
          <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layer rough&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>

<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pGroup</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The resulting parameters block looks like this:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-22" name="sd-tab-set-11" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-22">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p            Name              Min     Value     Max     Fit? 
    _    _____________________    _____    _____    _____    _____

    1    &quot;Substrate Roughness&quot;        1        3        5    true 
    2    &quot;My new param&quot;               1        2        3    false
    3    &quot;My other new param&quot;        10       20       30    false
    4    &quot;Layer thick&quot;               10       20       30    true 
    5    &quot;Layer SLD&quot;              1e-06    3e-06    5e-06    true 
    6    &quot;Layer rough&quot;                5        7       10    true 
</pre></div>
</div>
</div>
<input id="sd-tab-item-23" name="sd-tab-set-11" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-23">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+---------------------+-------+-------+-------+-------+
| index |         name        |  min  | value |  max  |  fit  |
+-------+---------------------+-------+-------+-------+-------+
|   0   | Substrate Roughness |  1.0  |  3.0  |  5.0  |  True |
|   1   |     My new param    |  1.0  |  2.0  |  3.0  | False |
|   2   |  My other new param |  10.0 |  20.0 |  30.0 | False |
|   3   |     Layer thick     |  10.0 |  20.0 |  30.0 |  True |
|   4   |      Layer SLD      | 1e-06 | 3e-06 | 5e-06 |  True |
|   5   |     Layer rough     |  5.0  |  7.0  |  10.0 |  True |
+-------+---------------------+-------+-------+-------+-------+
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Parameters can’t have duplicate names. Attempting to duplicate a name will throw an error. This can cause problems when loading in RasCAL-1 projects
where duplicate names are allowed.</p>
</div>
<p>To subsequently change the values of the parameters (including names), you can set the properties of a given parameter using name/value pairs,
which parameter to set can be specified using the index number or name of the parameter:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-24" name="sd-tab-set-12" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-24">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setParameter</span><span class="p">(</span><span class="s">&#39;My new param&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;My changed param&#39;</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setParameter</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.96</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">3.62</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setParameter</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;value&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">20.22</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setParameter</span><span class="p">(</span><span class="s">&#39;Layer rough&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-25" name="sd-tab-set-12" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-25">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;My new param&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;My changed param&#39;</span>
<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="mf">0.96</span>
<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="mf">3.62</span>
<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;Layer thick&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">20.22</span>
<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;Layer rough&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fit</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-26" name="sd-tab-set-13" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-26">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p            Name              Min     Value     Max     Fit? 
    _    _____________________    _____    _____    _____    _____

    1    &quot;Substrate Roughness&quot;        1        3        5    true 
    2    &quot;My changed param&quot;        0.96        2     3.62    false
    3    &quot;My other new param&quot;        10       20       30    false
    4    &quot;Layer thick&quot;               10    20.22       30    true 
    5    &quot;Layer SLD&quot;              1e-06    3e-06    5e-06    true 
    6    &quot;Layer rough&quot;                5        7       10    false
</pre></div>
</div>
</div>
<input id="sd-tab-item-27" name="sd-tab-set-13" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-27">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+---------------------+-------+-------+-------+-------+
| index |         name        |  min  | value |  max  |  fit  |
+-------+---------------------+-------+-------+-------+-------+
|   0   | Substrate Roughness |  1.0  |  3.0  |  5.0  |  True |
|   1   |   My changed param  |  0.96 |  2.0  |  3.62 | False |
|   2   |  My other new param |  10.0 |  20.0 |  30.0 | False |
|   3   |     Layer thick     |  10.0 | 20.22 |  30.0 |  True |
|   4   |      Layer SLD      | 1e-06 | 3e-06 | 5e-06 |  True |
|   5   |     Layer rough     |  5.0  |  7.0  |  10.0 | False |
+-------+---------------------+-------+-------+-------+-------+
</pre></div>
</div>
</div>
</div>
<p>Alternatively, you can set multiple properties of a given parameter at once using name/value pairs.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-28" name="sd-tab-set-14" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-28">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setParameter</span><span class="p">(</span><span class="s">&#39;Layer thick&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;thick&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;max&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-29" name="sd-tab-set-14" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-29">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;Layer thick&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;thick&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">33</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-30" name="sd-tab-set-15" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-30">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p            Name              Min     Value     Max     Fit? 
    _    _____________________    _____    _____    _____    _____

    1    &quot;Substrate Roughness&quot;        1        3        5    true 
    2    &quot;My changed param&quot;        0.96        2     3.62    false
    3    &quot;My other new param&quot;        10       20       30    false
    4    &quot;thick&quot;                      5    20.22       33    false
    5    &quot;Layer SLD&quot;              1e-06    3e-06    5e-06    true 
    6    &quot;Layer rough&quot;                5        7       10    false
</pre></div>
</div>
</div>
<input id="sd-tab-item-31" name="sd-tab-set-15" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-31">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+---------------------+-------+-------+-------+-------+
| index |         name        |  min  | value |  max  |  fit  |
+-------+---------------------+-------+-------+-------+-------+
|   0   | Substrate Roughness |  1.0  |  3.0  |  5.0  |  True |
|   1   |   My changed param  |  0.96 |  2.0  |  3.62 | False |
|   2   |  My other new param |  10.0 |  20.0 |  30.0 | False |
|   3   |        thick        |  5.0  | 20.22 |  33.0 | False |
|   4   |      Layer SLD      | 1e-06 | 3e-06 | 5e-06 |  True |
|   5   |     Layer rough     |  5.0  |  7.0  |  10.0 | False |
+-------+---------------------+-------+-------+-------+-------+
</pre></div>
</div>
</div>
</div>
<p>You can remove a parameter from the block using its index number or name. Note that if you remove a parameter from the middle of the block,
subsequent parameter index numbers will change.
Also, if you try to remove the substrate roughness you will get an error:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-32" name="sd-tab-set-16" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-32">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">removeParameter</span><span class="p">(</span><span class="s">&#39;Layer thick&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-33" name="sd-tab-set-16" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-33">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;Layer thick&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-34" name="sd-tab-set-17" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-34">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p            Name              Min     Value     Max     Fit? 
    _    _____________________    _____    _____    _____    _____

    1    &quot;Substrate Roughness&quot;        1        3        5    true 
    2    &quot;My changed param&quot;        0.96        2     3.62    false
    3    &quot;My other new param&quot;        10       20       30    false
    4    &quot;Layer SLD&quot;              1e-06    3e-06    5e-06    true 
    5    &quot;Layer rough&quot;                5        7       10    false
</pre></div>
</div>
</div>
<input id="sd-tab-item-35" name="sd-tab-set-17" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-35">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+---------------------+-------+-------+-------+-------+
| index |         name        |  min  | value |  max  |  fit  |
+-------+---------------------+-------+-------+-------+-------+
|   0   | Substrate Roughness |  1.0  |  3.0  |  5.0  |  True |
|   1   |   My changed param  |  0.96 |  2.0  |  3.62 | False |
|   2   |  My other new param |  10.0 |  20.0 |  30.0 | False |
|   3   |      Layer SLD      | 1e-06 | 3e-06 | 5e-06 |  True |
|   4   |     Layer rough     |  5.0  |  7.0  |  10.0 | False |
+-------+---------------------+-------+-------+-------+-------+
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-36" name="sd-tab-set-18" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-36">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">removeParameter</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-37" name="sd-tab-set-18" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-37">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-38" name="sd-tab-set-19" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-38">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Error using projectParametersMixin/removeParameter (line 144)
Can&#39;t remove protected parameters
</pre></div>
</div>
</div>
<input id="sd-tab-item-39" name="sd-tab-set-19" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-39">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>1 validation error for Project
  Value error, Can&#39;t delete the protected parameters: Substrate Roughness [type=value_error]
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are additional properties of Parameters used for Bayesian algorithms; see the <a class="reference internal" href="bayes.html#bayestutorial"><span class="std std-ref">Bayes tutorial</span></a>.</p>
</div>
</section>
<section id="the-layers-block-standard-layers-models-only">
<span id="standardlayers"></span><h3>The Layers Block (Standard Layers models only)<a class="headerlink" href="#the-layers-block-standard-layers-models-only" title="Link to this heading">#</a></h3>
<p>For standard layers models, model building is done by grouping the parameters into layers, and then into contrasts.
The layers block is not visible when either of the two custom models are selected. Layers are stored in the <code class="docutils literal notranslate"><span class="pre">layers</span></code> field of the <strong>Project</strong>.
As an example here, we make a new project, add some parameters, and create some layers.</p>
<p>For each of the custom models cases, the model building is done using a script (discussed in <a class="reference internal" href="customModels.html#custommodels"><span class="std std-ref">Custom Models</span></a>).</p>
<p>For this example, we will make two layers representing a deuterated and hydrogenated version of the same layer.
So, the layers will share all their parameters except for the SLD.</p>
<p>Start by making a new project, and adding the parameters we will need:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-40" name="sd-tab-set-20" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-40">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">createProject</span><span class="p">(</span><span class="n">name</span><span class="p">=</span><span class="s">&#39;Layers Example&#39;</span><span class="p">);</span>

<span class="n">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{{</span><span class="s">&#39;Layer Thickness&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">};</span>
<span class="w">          </span><span class="p">{</span><span class="s">&#39;H SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">6e-6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">4e-6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1e-6</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">};</span>
<span class="w">          </span><span class="p">{</span><span class="s">&#39;D SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">5e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">7e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">9e-6</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">};</span>
<span class="w">          </span><span class="p">{</span><span class="s">&#39;Layer rough&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">};</span>
<span class="w">          </span><span class="p">{</span><span class="s">&#39;Layer hydr&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">}};</span>

<span class="n">problem</span><span class="p">.</span><span class="n">addParameterGroup</span><span class="p">(</span><span class="n">params</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-41" name="sd-tab-set-20" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-41">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layers Example&#39;</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layer Thickness&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
          <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;H SLD&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mf">6e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mf">4e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=-</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
          <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;D SLD&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">5e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">7e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">9e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
          <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layer rough&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
          <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layer hydr&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>

<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>A layer is defined in terms of a name, thickness, SLD, roughness and (optional) hydration, along with details of which bulk phase is hydrating the layer.
The easiest way to define these is to group the parameters into cell arrays, and then add them to the project as a layers group:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-42" name="sd-tab-set-21" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-42">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addLayer</span><span class="p">(</span><span class="s">&#39;H Layer&#39;</span><span class="p">,</span><span class="s">&#39;Layer Thickness&#39;</span><span class="p">,</span><span class="s">&#39;H SLD&#39;</span><span class="p">,</span><span class="s">&#39;Layer rough&#39;</span><span class="p">,</span><span class="s">&#39;Layer hydr&#39;</span><span class="p">,</span><span class="s">&#39;bulk out&#39;</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addLayer</span><span class="p">(</span><span class="s">&#39;D Layer&#39;</span><span class="p">,</span><span class="s">&#39;Layer Thickness&#39;</span><span class="p">,</span><span class="s">&#39;D SLD&#39;</span><span class="p">,</span><span class="s">&#39;Layer rough&#39;</span><span class="p">,</span><span class="s">&#39;Layer hydr&#39;</span><span class="p">,</span><span class="s">&#39;bulk out&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-43" name="sd-tab-set-21" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-43">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;H Layer&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;Layer Thickness&#39;</span><span class="p">,</span> <span class="n">SLD</span><span class="o">=</span><span class="s1">&#39;H SLD&#39;</span><span class="p">,</span>
                      <span class="n">roughness</span><span class="o">=</span><span class="s1">&#39;Layer rough&#39;</span><span class="p">,</span> <span class="n">hydration</span><span class="o">=</span><span class="s1">&#39;Layer hydr&#39;</span><span class="p">,</span> <span class="n">hydrate_with</span><span class="o">=</span><span class="s1">&#39;bulk out&#39;</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;D Layer&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;Layer Thickness&#39;</span><span class="p">,</span> <span class="n">SLD</span><span class="o">=</span><span class="s1">&#39;D SLD&#39;</span><span class="p">,</span>
                      <span class="n">roughness</span><span class="o">=</span><span class="s1">&#39;Layer rough&#39;</span><span class="p">,</span> <span class="n">hydration</span><span class="o">=</span><span class="s1">&#39;Layer hydr&#39;</span><span class="p">,</span> <span class="n">hydrate_with</span><span class="o">=</span><span class="s1">&#39;bulk out&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Our two layers now appear in the <code class="docutils literal notranslate"><span class="pre">layers</span></code> block of the project:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-44" name="sd-tab-set-22" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-44">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p      Name           Thickness          SLD        Roughness       Hydration      Hydrate with
    _    _________    _________________    _______    _____________    ____________    ____________

    1    &quot;H Layer&quot;    &quot;Layer Thickness&quot;    &quot;H SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
    2    &quot;D Layer&quot;    &quot;Layer Thickness&quot;    &quot;D SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
</pre></div>
</div>
</div>
<input id="sd-tab-item-45" name="sd-tab-set-22" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-45">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+---------+-----------------+-------+-------------+------------+--------------+
| index |   name  |    thickness    |  SLD  |  roughness  | hydration  | hydrate with |
+-------+---------+-----------------+-------+-------------+------------+--------------+
|   0   | H Layer | Layer Thickness | H SLD | Layer rough | Layer hydr |   bulk out   |
|   1   | D Layer | Layer Thickness | D SLD | Layer rough | Layer hydr |   bulk out   |
+-------+---------+-----------------+-------+-------------+------------+--------------+
</pre></div>
</div>
</div>
</div>
<p>Note that in RAT, hydration is percent hydration between 0 and 100. It is not necessary to define a hydration at all, and we can also make layers without this parameter:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-46" name="sd-tab-set-23" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-46">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Non hydrated layer</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addLayer</span><span class="p">(</span><span class="s">&#39;Dry Layer&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Layer Thickness&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;D SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Layer rough&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-47" name="sd-tab-set-23" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-47">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Dry Layer&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;Layer Thickness&#39;</span><span class="p">,</span> <span class="n">SLD</span><span class="o">=</span><span class="s1">&#39;D SLD&#39;</span><span class="p">,</span> <span class="n">roughness</span><span class="o">=</span><span class="s1">&#39;Layer rough&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-48" name="sd-tab-set-24" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-48">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p       Name            Thickness          SLD        Roughness       Hydration      Hydrate with
    _    ___________    _________________    _______    _____________    ____________    ____________

    1    &quot;H Layer&quot;      &quot;Layer Thickness&quot;    &quot;H SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
    2    &quot;D Layer&quot;      &quot;Layer Thickness&quot;    &quot;D SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
    3    &quot;Dry Layer&quot;    &quot;Layer Thickness&quot;    &quot;D SLD&quot;    &quot;Layer rough&quot;    &quot;&quot;               &quot;bulk out&quot; 
</pre></div>
</div>
</div>
<input id="sd-tab-item-49" name="sd-tab-set-24" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-49">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+-----------+-----------------+-------+-------------+------------+--------------+
| index |    name   |    thickness    |  SLD  |  roughness  | hydration  | hydrate with |
+-------+-----------+-----------------+-------+-------------+------------+--------------+
|   0   |  H Layer  | Layer Thickness | H SLD | Layer rough | Layer hydr |   bulk out   |
|   1   |  D Layer  | Layer Thickness | D SLD | Layer rough | Layer hydr |   bulk out   |
|   2   | Dry Layer | Layer Thickness | D SLD | Layer rough |            |   bulk out   |
+-------+-----------+-----------------+-------+-------------+------------+--------------+
</pre></div>
</div>
</div>
</div>
<p>The value of an existing layer can be changed by specifying the layer, layer parameter to be changed and the name of the new parameter.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-50" name="sd-tab-set-25" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-50">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setLayer</span><span class="p">(</span><span class="s">&#39;H Layer&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;thickness&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;H SLD&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-51" name="sd-tab-set-25" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-51">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;H Layer&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;H SLD&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-52" name="sd-tab-set-26" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-52">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p       Name            Thickness          SLD        Roughness       Hydration      Hydrate with
    _    ___________    _________________    _______    _____________    ____________    ____________

    1    &quot;H Layer&quot;      &quot;H SLD&quot;              &quot;H SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
    2    &quot;D Layer&quot;      &quot;Layer Thickness&quot;    &quot;D SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
    3    &quot;Dry Layer&quot;    &quot;Layer Thickness&quot;    &quot;D SLD&quot;    &quot;Layer rough&quot;    &quot;&quot;               &quot;bulk out&quot; 
</pre></div>
</div>
</div>
<input id="sd-tab-item-53" name="sd-tab-set-26" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-53">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+-----------+-----------------+-------+-------------+------------+--------------+
| index |    name   |    thickness    |  SLD  |  roughness  | hydration  | hydrate with |
+-------+-----------+-----------------+-------+-------------+------------+--------------+
|   0   |  H Layer  |      H SLD      | H SLD | Layer rough | Layer hydr |   bulk out   |
|   1   |  D Layer  | Layer Thickness | D SLD | Layer rough | Layer hydr |   bulk out   |
|   2   | Dry Layer | Layer Thickness | D SLD | Layer rough |            |   bulk out   |
+-------+-----------+-----------------+-------+-------------+------------+--------------+
</pre></div>
</div>
</div>
</div>
<p>The layers are then used to set up the contrasts as usual with a standard layers model.</p>
</section>
<section id="bulk-phases">
<h3>Bulk Phases<a class="headerlink" href="#bulk-phases" title="Link to this heading">#</a></h3>
<p>These are treated in the same way as parameters e.g.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-54" name="sd-tab-set-27" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-54">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addBulkIn</span><span class="p">(</span><span class="s">&#39;Silicon&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">2.07e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">2.1e-6</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addBulkOut</span><span class="p">(</span><span class="s">&#39;H2O&#39;</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.6e-6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.56e-6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.5e-6</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-55" name="sd-tab-set-27" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-55">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">bulk_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Silicon&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">2.0e-06</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">2.073e-06</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">2.1e-06</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">bulk_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mf">0.6e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mf">0.56e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=-</span><span class="mf">0.5e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-56" name="sd-tab-set-28" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-56">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    p      Name        Min      Value        Max      Fit? 
    _    _________    _____    ________    _______    _____

    1    &quot;SLD Air&quot;        0           0          0    false
    2    &quot;Silicon&quot;    2e-06    2.07e-06    2.1e-06    false

    p      Name         Min       Value        Max       Fit? 
    _    _________    _______    ________    ________    _____

    1    &quot;SLD D2O&quot;    6.2e-06    6.35e-06    6.35e-06    false
    2    &quot;H2O&quot;         -6e-07    -5.6e-07      -5e-07    false
</pre></div>
</div>
</div>
<input id="sd-tab-item-57" name="sd-tab-set-28" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-57">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+---------+-------+-----------+---------+-------+
| index |   name  |  min  |   value   |   max   |  fit  |
+-------+---------+-------+-----------+---------+-------+
|   0   | SLD Air |  0.0  |    0.0    |   0.0   | False |
|   1   | Silicon | 2e-06 | 2.073e-06 | 2.1e-06 | False |
+-------+---------+-------+-----------+---------+-------+
+-------+---------+---------+----------+----------+-------+
| index |   name  |   min   |  value   |   max    |  fit  |
+-------+---------+---------+----------+----------+-------+
|   0   | SLD D2O | 6.2e-06 | 6.35e-06 | 6.35e-06 | False |
|   1   |   H2O   |  -6e-07 | -5.6e-07 |  -5e-07  | False |
+-------+---------+---------+----------+----------+-------+
</pre></div>
</div>
</div>
</div>
<p>The values of <strong>Bulk In</strong> and <strong>Bulk Out</strong> can be modified as shown below:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-58" name="sd-tab-set-29" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-58">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setBulkOut</span><span class="p">(</span><span class="s">&#39;H2O, &#39;</span><span class="n">value</span><span class="o">&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.9e-6</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setBulkIn</span><span class="p">(</span><span class="s">&#39;Silicon&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;value&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">5.9e-6</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-59" name="sd-tab-set-29" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-59">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">bulk_out</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;H2O&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">5.9e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">bulk_in</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;Silicon&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">5.9e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="scalefactors">
<h3>Scalefactors<a class="headerlink" href="#scalefactors" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">scalefactors</span></code> are also a parameters block like the bulk phases. You can add and modify <code class="docutils literal notranslate"><span class="pre">scalefactors</span></code> similarly to the previous blocks.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-60" name="sd-tab-set-30" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-60">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addScalefactor</span><span class="p">(</span><span class="s">&#39;New Scalefactor&#39;</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.1</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setScalefactor</span><span class="p">(</span><span class="s">&#39;New Scalefactor&#39;</span><span class="p">,</span><span class="s">&#39;value&#39;</span><span class="p">,</span><span class="mf">1.01</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-61" name="sd-tab-set-30" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-61">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">scalefactors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;New Scalefactor&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">scalefactors</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;New Scalefactor&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="backgrounds">
<h3>Backgrounds<a class="headerlink" href="#backgrounds" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">backgrounds</span></code> block is used to define the type of background applied to each contrast, and the parameters used to define the backgrounds themselves. The fittable parameters are in the
<strong>Background Parameters</strong> block, and the backgrounds themselves are in the <code class="docutils literal notranslate"><span class="pre">backgrounds</span></code> block:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-62" name="sd-tab-set-31" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-62">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    (a) Background Parameters: 

    p            Name             Min     Value     Max     Fit? 
    _    ____________________    _____    _____    _____    _____

    1    &quot;Background Param 1&quot;    1e-07    1e-06    1e-05    false

    (b) Backgrounds:  

    p         Name            Type              Source           Value 1    Value 2    Value 3    Value 4    Value 5
    _    ______________    __________    ____________________    _______    _______    _______    _______    _______

    1    &quot;Background 1&quot;    &quot;constant&quot;    &quot;Background Param 1&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
</pre></div>
</div>
</div>
<input id="sd-tab-item-63" name="sd-tab-set-31" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-63">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+--------------------+-------+-------+-------+-------+
| index |        name        |  min  | value |  max  |  fit  |
+-------+--------------------+-------+-------+-------+-------+
|   0   | Background Param 1 | 1e-07 | 1e-06 | 1e-05 | False |
+-------+--------------------+-------+-------+-------+-------+
+-------+--------------+----------+--------------------+
| index |     name     |   type   |       source       |
+-------+--------------+----------+--------------------+
|   0   | Background 1 | constant | Background Param 1 |
+-------+--------------+----------+--------------------+
</pre></div>
</div>
</div>
</div>
<p>The <strong>Background Parameters</strong> is in fact another instance of the parameters class, and there are corresponding methods to fit, set limits and so on for these.</p>
<p>The backgrounds can be one of three types: <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;function&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;data&quot;</span></code>. The three types are discussed in more detail below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code> - This is the normal background type from RasCAL-1. Each background requires one <strong>and only one</strong> Background Parameter associated with it, as follows:</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-64" name="sd-tab-set-32" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-64">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addBackgroundParam</span><span class="p">(</span><span class="s">&#39;My New BackPar&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-8</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-7</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-6</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addBackground</span><span class="p">(</span><span class="s">&#39;My New Background&#39;</span><span class="p">,</span><span class="s">&#39;constant&#39;</span><span class="p">,</span><span class="s">&#39;My New BackPar&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-65" name="sd-tab-set-32" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-65">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">background_parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My New BackPar&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">1e-8</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1e-7</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My New Background&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;My New BackPar&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>With this code snippet we’ve made a new background, with the value taken from the (fittable) parameter called ‘My New BackPar’:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-66" name="sd-tab-set-33" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-66">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    (a) Background Parameters: 

    p            Name             Min     Value     Max     Fit? 
    _    ____________________    _____    _____    _____    _____

    1    &quot;Background Param 1&quot;    1e-07    1e-06    1e-05    false
    2    &quot;My New BackPar&quot;        1e-08    1e-07    1e-06    true 

    (b) Backgrounds:  

    p           Name               Type              Source           Value 1    Value 2    Value 3    Value 4    Value 5
    _    ___________________    __________    ____________________    _______    _______    _______    _______    _______

    1    &quot;Background 1&quot;         &quot;constant&quot;    &quot;Background Param 1&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
    2    &quot;My New Background&quot;    &quot;constant&quot;    &quot;My New BackPar&quot;          &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
</pre></div>
</div>
</div>
<input id="sd-tab-item-67" name="sd-tab-set-33" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-67">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+--------------------+-------+-------+-------+-------+
| index |        name        |  min  | value |  max  |  fit  |
+-------+--------------------+-------+-------+-------+-------+
|   0   | Background Param 1 | 1e-07 | 1e-06 | 1e-05 | False |
|   1   |   My New BackPar   | 1e-08 | 1e-07 | 1e-06 |  True |
+-------+--------------------+-------+-------+-------+-------+
+-------+-------------------+----------+--------------------+
| index |        name       |   type   |       source       |
+-------+-------------------+----------+--------------------+
|   0   |    Background 1   | constant | Background Param 1 |
|   1   | My New Background | constant |   My New BackPar   |
+-------+-------------------+----------+--------------------+
</pre></div>
</div>
</div>
</div>
<p>This is then available to be used by any of our contrasts (see later).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;data&quot;</span></code> - This option is used when a measured data background is available. Our measured data is given in a datafile loaded into the data block (see later).
To define a data background from a datafile called ‘My Background Data’, we simply specify this datafile in our background specification:</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-68" name="sd-tab-set-34" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-68">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addBackground</span><span class="p">(</span><span class="s">&#39;Data Background 1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;data&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;My Background Data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-69" name="sd-tab-set-34" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-69">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">backgrounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Data Background 1&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;My Background Data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;function&quot;</span></code> - This option defines the background using a function loaded into the custom file block (see later).
To define a function background, we simply specify this custom file in our background specification, along with
up to five background parameters (defined in the background parameters block) to use in the function.</p>
<p>In the following code block we define a background based on the function <code class="docutils literal notranslate"><span class="pre">&quot;My</span> <span class="pre">Background</span> <span class="pre">Function&quot;</span></code> which takes two values given
by <code class="docutils literal notranslate"><span class="pre">&quot;Background</span> <span class="pre">Parameter</span> <span class="pre">1&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Background</span> <span class="pre">Parameter</span> <span class="pre">2&quot;</span></code></p>
</li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-70" name="sd-tab-set-35" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-70">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addBackground</span><span class="p">(</span><span class="s">&#39;Data Background 1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;function&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;My Background Function&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Background Parameter 1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Background Parameter 2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-71" name="sd-tab-set-35" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-71">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">backgrounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Data Background 1&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;My Background Function&#39;</span> <span class="n">value_1</span><span class="o">=</span><span class="s1">&#39;Background Parameter 1&#39;</span><span class="p">,</span> <span class="n">value_2</span><span class="o">=</span><span class="s1">&#39;Background Parameter 2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is then used in the reflectivity calculation for any contrast in which it is specified.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Take care to make sure that the background and data with which it is intended to be used have <strong>the same q values</strong>, otherwise the code will raise an error.</p>
</div>
</section>
<section id="resolutions">
<h3>Resolutions<a class="headerlink" href="#resolutions" title="Link to this heading">#</a></h3>
<p>As is the case for the backgrounds, the resolutions block is also split into two parts: a <strong>Resolution Parameters</strong> block which defines the fittable parameters,
and then the main <code class="docutils literal notranslate"><span class="pre">resolutions</span></code> block which groups these as required into actual resolutions.
The three types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>: The default type. A resolution parameter defines the width of a sliding Gaussian window convolution applied to the data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;data&quot;</span></code>: Convolution with a sliding Gaussian defined by a fourth column of a datafile.</p></li>
</ul>
<p>To define a resolution parameter, we use the following methods:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-72" name="sd-tab-set-36" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-72">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addResolutionParam</span><span class="p">(</span><span class="s">&#39;My Resolution Param&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.02</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.08</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-73" name="sd-tab-set-36" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-73">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">resolution_parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My Resolution Param&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">0.08</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-74" name="sd-tab-set-37" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-74">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    (a) Resolutions Parameters: 

    p           Name           Min     Value    Max     Fit? 
    _    __________________    ____    _____    ____    _____

    1    &quot;Resolution par 1&quot;    0.01    0.03     0.05    false

    (b) Resolutions:  

    p         Name            Type             Source          Value 1    Value 2    Value 3    Value 4    Value 5
    _    ______________    __________    __________________    _______    _______    _______    _______    _______

    1    &quot;Resolution 1&quot;    &quot;constant&quot;    &quot;Resolution par 1&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
</pre></div>
</div>
</div>
<input id="sd-tab-item-75" name="sd-tab-set-37" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-75">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+--------------------+------+-------+------+-------+
| index |        name        | min  | value | max  |  fit  |
+-------+--------------------+------+-------+------+-------+
|   0   | Resolution Param 1 | 0.01 |  0.03 | 0.05 | False |
+-------+--------------------+------+-------+------+-------+
+-------+--------------+----------+--------------------+
| index |     name     |   type   |       source       |
+-------+--------------+----------+--------------------+
|   0   | Resolution 1 | constant | Resolution Param 1 |
+-------+--------------+----------+--------------------+
</pre></div>
</div>
</div>
</div>
<p>Then, we make the actual resolution referring to whichever one of the resolution parameters:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-76" name="sd-tab-set-38" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-76">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addResolution</span><span class="p">(</span><span class="s">&#39;My new resolution&#39;</span><span class="p">,</span><span class="s">&#39;constant&#39;</span><span class="p">,</span><span class="s">&#39;My Resolution Param&#39;</span><span class="p">)</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addResolution</span><span class="p">(</span><span class="s">&#39;My Data Resolution&#39;</span><span class="p">,</span><span class="s">&#39;data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-77" name="sd-tab-set-38" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-77">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">resolutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My new resolution&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;My Resolution Param&#39;</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">resolutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My Data Resolution&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-78" name="sd-tab-set-39" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-78">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    (a) Resolutions Parameters: 

    p            Name             Min     Value    Max     Fit? 
    _    _____________________    ____    _____    ____    _____

    1    &quot;Resolution par 1&quot;       0.01    0.03     0.05    false
    2    &quot;My Resolution Param&quot;    0.02    0.05     0.08    true 

    (b) Resolutions:  

    p            Name               Type              Source            Value 1    Value 2    Value 3    Value 4    Value 5
    _    ____________________    __________    _____________________    _______    _______    _______    _______    _______

    1    &quot;Resolution 1&quot;          &quot;constant&quot;    &quot;Resolution par 1&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
    2    &quot;My new resolution&quot;     &quot;constant&quot;    &quot;My Resolution Param&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
    3    &quot;My Data Resolution&quot;    &quot;data&quot;        &quot;&quot;                         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
</pre></div>
</div>
</div>
<input id="sd-tab-item-79" name="sd-tab-set-39" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-79">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+--------------------+----------+---------------------+---------+
| index |        name        |   type   |        source       | value 1 |
+-------+--------------------+----------+---------------------+---------+
|   0   |    Resolution 1    | constant |  Resolution Param 1 |         |
|   1   | My new resolution  | constant | My Resolution Param |         |
|   2   | My Data Resolution |   data   |                     |         |
+-------+--------------------+----------+---------------------+---------+
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There are no parameters for a <code class="docutils literal notranslate"><span class="pre">&quot;data&quot;</span></code> resolution. Instead this tells RAT to expect a fourth column in the datafile for the contrast.
If no fourth column exists in the data to which this is applied, RAT will throw an error at runtime.</p>
</div>
</section>
<section id="data">
<h3>Data<a class="headerlink" href="#data" title="Link to this heading">#</a></h3>
<p>The data block contains the data which defines at which points in q the reflectivity is calculated at each contrast.
By default, it initialises with a single <code class="docutils literal notranslate"><span class="pre">&quot;Simulation&quot;</span></code> entry:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-80" name="sd-tab-set-40" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-80">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>        Name          Data       Data Range      Simulation Range   
    ____________    _________    __________    _____________________

    &quot;Simulation&quot;    &quot;No Data&quot;       &quot;-&quot;        &quot;[ 0.0050 , 0.7000 ]&quot;
</pre></div>
</div>
</div>
<input id="sd-tab-item-81" name="sd-tab-set-40" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-81">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+------------+------+------------+------------------+
| index |    name    | data | data range | simulation range |
+-------+------------+------+------------+------------------+
|   0   | Simulation |  []  |     []     |   [0.005, 0.7]   |
+-------+------------+------+------------+------------------+
</pre></div>
</div>
</div>
</div>
<p>For each entry in the table there are four fields:</p>
<ul class="simple">
<li><p><strong>Name</strong>: The name you choose to give the datafile (for reference in the contrasts block)</p></li>
<li><p><strong>Data</strong>: An array containing the data itself (empty for ‘Simulation’).</p></li>
<li><p><strong>Data Range</strong>: The min / max range of the data you wish to include in the fit.
You do not have to include all the data in the calculation of chi-squared.
This range must lie <strong>within</strong> the range of the dataset.</p></li>
<li><p><strong>Simulation Range</strong>: The total range of the simulation to be calculated.
This must be equal to or larger than the range of any data added to the <strong>Data</strong> column.</p></li>
</ul>
<p>To add data, we first load it into Matlab/Python, then create a new data entry containing it:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-82" name="sd-tab-set-41" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-82">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">getappdata</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;root&#39;</span><span class="p">);</span>
<span class="n">myData</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">readmatrix</span><span class="p">(</span><span class="nb">fullfile</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;/examples/normalReflectivity/customXY/c_PLP0016596.dat&#39;</span><span class="p">));</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addData</span><span class="p">(</span><span class="s">&#39;My new datafile&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">myData</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-83" name="sd-tab-set-41" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-83">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">myData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;c_PLP0016596.dat&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;My new datafile&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">myData</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>and our new dataset appears in the table:</p>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-84" name="sd-tab-set-42" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-84">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>          Name                    Data                   Data Range            Simulation Range   
    _________________    _______________________    _____________________    _____________________

    &quot;Simulation&quot;         &quot;No Data&quot;                  &quot;-&quot;                      &quot;[ 0.0050 , 0.7000 ]&quot;
    &quot;My new datafile&quot;    &quot;Data array: [146 x 4]&quot;    &quot;[ 0.0057 , 0.3961 ]&quot;    &quot;[ 0.0057 , 0.3961 ]&quot;
</pre></div>
</div>
</div>
<input id="sd-tab-item-85" name="sd-tab-set-42" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-85">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+-----------------+-----------------------+----------------------+----------------------+
| index |       name      |          data         |      data range      |   simulation range   |
+-------+-----------------+-----------------------+----------------------+----------------------+
|   0   |    Simulation   |           []          |          []          |     [0.005, 0.7]     |
|   1   | My new datafile | Data array: [146 x 4] | [0.0057118, 0.39606] | [0.0057118, 0.39606] |
+-------+-----------------+-----------------------+----------------------+----------------------+
</pre></div>
</div>
</div>
</div>
<p>Note that we did not specify data or simulation ranges, and so these default to the min / max values of the data added. We can change these as follows:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-86" name="sd-tab-set-43" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-86">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setData</span><span class="p">(</span><span class="s">&#39;My new datafile&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">dataRange</span><span class="p">=[</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-87" name="sd-tab-set-43" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-87">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;My new datafile&#39;</span><span class="p">,</span> <span class="n">data_range</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-88" name="sd-tab-set-44" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-88">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ans = 

         modelType: &#39;standard layers&#39;
    experimentName: &#39;Layers Example&#39;
          geometry: &#39;air/substrate&#39;


    Parameters: ---------------------------------------------------------------------------------------------- 

    p            Name              Min      Value      Max      Fit? 
    _    _____________________    ______    ______    ______    _____

    1    &quot;Substrate Roughness&quot;         1         3         5    true 
    2    &quot;Layer Thickness&quot;            10        20        30    false
    3    &quot;H SLD&quot;                  -6e-06    -4e-06    -1e-06    false
    4    &quot;D SLD&quot;                   5e-06     7e-06     9e-06    true 
    5    &quot;Layer rough&quot;                 3         5         7    true 
    6    &quot;Layer hydr&quot;                  0        10        20    true 


    Bulk In: -------------------------------------------------------------------------------------------------- 

    p      Name        Min      Value        Max      Fit? 
    _    _________    _____    ________    _______    _____

    1    &quot;SLD Air&quot;        0           0          0    false
    2    &quot;Silicon&quot;    2e-06    2.07e-06    2.1e-06    false


    Bulk Out: ------------------------------------------------------------------------------------------------- 

    p      Name         Min       Value        Max       Fit? 
    _    _________    _______    ________    ________    _____

    1    &quot;SLD D2O&quot;    6.2e-06    6.35e-06    6.35e-06    false
    2    &quot;H2O&quot;         -6e-07    -5.6e-07      -5e-07    false


    Scalefactors: ------------------------------------------------------------------------------------------------- 

    p         Name          Min     Value    Max     Fit? 
    _    _______________    ____    _____    ____    _____

    1    &quot;Scalefactor 1&quot;    0.02    0.23     0.25    false


    Backgrounds: ----------------------------------------------------------------------------------------------- 

    (a) Background Parameters: 

    p            Name             Min     Value     Max     Fit? 
    _    ____________________    _____    _____    _____    _____

    1    &quot;Background Param 1&quot;    1e-07    1e-06    1e-05    false
    2    &quot;My New BackPar&quot;        1e-08    1e-07    1e-06    true 

    (b) Backgrounds:  

    p           Name               Type              Source           Value 1    Value 2    Value 3    Value 4    Value 5
    _    ___________________    __________    ____________________    _______    _______    _______    _______    _______

    1    &quot;Background 1&quot;         &quot;constant&quot;    &quot;Background Param 1&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
    2    &quot;My New Background&quot;    &quot;constant&quot;    &quot;My New BackPar&quot;          &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   


    Resolutions: --------------------------------------------------------------------------------------------- 

    (a) Resolutions Parameters: 

    p            Name             Min     Value    Max     Fit? 
    _    _____________________    ____    _____    ____    _____

    1    &quot;Resolution par 1&quot;       0.01    0.03     0.05    false
    2    &quot;My Resolution Param&quot;    0.02    0.05     0.08    true 

    (b) Resolutions:  

    p            Name               Type              Source            Value 1    Value 2    Value 3    Value 4    Value 5
    _    ____________________    __________    _____________________    _______    _______    _______    _______    _______

    1    &quot;Resolution 1&quot;          &quot;constant&quot;    &quot;Resolution par 1&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
    2    &quot;My new resolution&quot;     &quot;constant&quot;    &quot;My Resolution Param&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
    3    &quot;My Data Resolution&quot;    &quot;data&quot;        &quot;&quot;                         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   


    Layers: -------------------------------------------------------------------------------------------------- 

    p       Name            Thickness          SLD        Roughness       Hydration      Hydrate with
    _    ___________    _________________    _______    _____________    ____________    ____________

    1    &quot;H Layer&quot;      &quot;H SLD&quot;              &quot;H SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
    2    &quot;D Layer&quot;      &quot;Layer Thickness&quot;    &quot;D SLD&quot;    &quot;Layer rough&quot;    &quot;Layer hydr&quot;     &quot;bulk out&quot; 
    3    &quot;Dry Layer&quot;    &quot;Layer Thickness&quot;    &quot;D SLD&quot;    &quot;Layer rough&quot;    &quot;&quot;               &quot;bulk out&quot; 


    Custom Files: ------------------------------------------------------------------------------------------------------ 

    Name    Filename    Function Name    Language    Path
    ____    ________    _____________    ________    ____

     &quot;&quot;        &quot;&quot;            &quot;&quot;             &quot;&quot;        &quot;&quot; 


    Data: ------------------------------------------------------------------------------------------------------ 

          Name                    Data                   Data Range            Simulation Range   
    _________________    _______________________    _____________________    _____________________

    &quot;Simulation&quot;         &quot;No Data&quot;                  &quot;-&quot;                      &quot;[ 0.0050 , 0.7000 ]&quot;
    &quot;My new datafile&quot;    &quot;Data array: [146 x 4]&quot;    &quot;[ 0.1000 , 0.3000 ]&quot;    &quot;[ 0.0057 , 0.3961 ]&quot;


   Contrasts: ----------------------------------------------------------------------------------------------- 

             p         
    ___________________

    &quot;Name&quot;             
    &quot;Data&quot;             
    &quot;Background&quot;       
    &quot;Background Action&quot;
    &quot;Bulk in&quot;          
    &quot;Bulk out&quot;         
    &quot;Scalefactor&quot;      
    &quot;Resolution&quot;       
    &quot;Resample&quot;         
    &quot;Repeat Layers&quot;    
    &quot;Model&quot;            

          Name                    Data                   Data Range            Simulation Range   
    _________________    _______________________    _____________________    _____________________

    &quot;Simulation&quot;         &quot;No Data&quot;                  &quot;-&quot;                      &quot;[ 0.0050 , 0.7000 ]&quot;
    &quot;My new datafile&quot;    &quot;Data array: [146 x 4]&quot;    &quot;[ 0.1000 , 0.3000 ]&quot;    &quot;[ 0.0057 , 0.3961 ]&quot;
</pre></div>
</div>
</div>
<input id="sd-tab-item-89" name="sd-tab-set-44" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-89">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+-------+-----------------+-----------------------+------------+----------------------+
| index |       name      |          data         | data range |   simulation range   |
+-------+-----------------+-----------------------+------------+----------------------+
|   0   |    Simulation   |           []          |     []     |     [0.005, 0.7]     |
|   1   | My new datafile | Data array: [146 x 4] | [0.1, 0.3] | [0.0057118, 0.39606] |
+-------+-----------------+-----------------------+------------+----------------------+
</pre></div>
</div>
</div>
</div>
</section>
<section id="putting-it-all-together-defining-contrasts">
<h3>Putting it all together – defining contrasts<a class="headerlink" href="#putting-it-all-together-defining-contrasts" title="Link to this heading">#</a></h3>
<p>Once we have defined the various aspects of our project, i.e. backgrounds, data and so on, we group these together into contrasts to make our fitting project.
A contrast defines one ‘experimental setup’, for example in our hydration/deuteration model we need two contrasts, one for hydration and one for deuteration.
We can add a contrast using just its name, and edit it later, or we can specify which parts of our project we want to add to the contrast using name value pairs:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-90" name="sd-tab-set-45" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-90">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addContrast</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;D-tail/H-Head/D2O&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;background&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Background D2O&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;resolution&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Resolution 1&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;scalefactor&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Scalefactor 1&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;BulkIn&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;SLD Air&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;BulkOut&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;SLD D2O&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;data&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;D-tail / H-head / D2O&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-91" name="sd-tab-set-45" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-91">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">contrasts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;D-tail/H-Head/D2O&#39;</span><span class="p">,</span>
                         <span class="n">background</span><span class="o">=</span><span class="s1">&#39;Background D2O&#39;</span><span class="p">,</span>
                         <span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;Resolution 1&#39;</span><span class="p">,</span>
                         <span class="n">scalefactor</span><span class="o">=</span><span class="s1">&#39;Scalefactor 1&#39;</span><span class="p">,</span>
                         <span class="n">bulk_in</span><span class="o">=</span><span class="s1">&#39;SLD Air&#39;</span><span class="p">,</span>
                         <span class="n">bulk_out</span><span class="o">=</span><span class="s1">&#39;SLD D2O&#39;</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="s1">&#39;D-tail / H-head / D2O&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The values which we add must refer to names within the other blocks of the project. If the name doesn’t exist in the relevant block, an error will be raised.</p>
<p>Once we have added the contrasts, then we need to set the model, either by adding layers for a <code class="docutils literal notranslate"><span class="pre">&quot;standard</span> <span class="pre">layers&quot;</span></code> project,
or a custom model file (we discuss these in <a class="reference internal" href="customModels.html#custommodels"><span class="std std-ref">Custom Models</span></a>).
In the case of layers, we give a list of layer names, in order from bulk in to bulk out.
So for a monolayer for example, we would specify tails and then heads as shown below:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-92" name="sd-tab-set-46" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-92">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setContrast</span><span class="p">(</span><span class="s">&#39;D-tail/H-Head/D2O&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;model&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;Deuterated Tails&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Hydrogenated heads&#39;</span><span class="p">});</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-93" name="sd-tab-set-46" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-93">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">contrasts</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;D-tail/H-Head/D2O&#39;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Deuterated Tails&#39;</span><span class="p">,</span> <span class="s1">&#39;Hydrogenated heads&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>We can also define the layers array beforehand and include it when defining the contrast. Once we have defined our contrasts they appear in the <code class="docutils literal notranslate"><span class="pre">contrasts</span></code> block at the end of the project when it is displayed.</p>
</section>
</section>
<section id="the-monolayer-example-in-full">
<h2>The Monolayer Example In Full<a class="headerlink" href="#the-monolayer-example-in-full" title="Link to this heading">#</a></h2>
<p>In the previous sections, we showed an example of a pre-loaded problem definition class, which we used to analyse data from two contrasts of a lipid monolayer. Now, rather than loading in a pre-defined version of this problem we can use our class methods to build this from scratch, and do the same analysis as we did there, but this time from a script.</p>
<p>To start, we first make an instance of the <strong>Project</strong> class:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-94" name="sd-tab-set-47" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-94">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">createProject</span><span class="p">(</span><span class="n">name</span><span class="p">=</span><span class="s">&#39;DSPC monolayers&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-95" name="sd-tab-set-47" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-95">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">RATapi</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">RAT</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;DSPC monolayers&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Then we need to define the parameters we need. We’ll do this by making a parameters block, and adding these to the project:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-96" name="sd-tab-set-48" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-96">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Define the parameters:</span>
<span class="n">Parameters</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c">%       Name                min     val     max      fit?</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Tails Thickness&#39;</span><span class="p">,</span><span class="w">         </span><span class="mi">10</span><span class="p">,</span><span class="w">     </span><span class="mi">20</span><span class="p">,</span><span class="w">      </span><span class="mi">30</span><span class="p">,</span><span class="w">     </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Heads Thickness&#39;</span><span class="p">,</span><span class="w">          </span><span class="mi">3</span><span class="p">,</span><span class="w">     </span><span class="mi">11</span><span class="p">,</span><span class="w">      </span><span class="mi">16</span><span class="p">,</span><span class="w">     </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Tails Roughness&#39;</span><span class="p">,</span><span class="w">          </span><span class="mi">2</span><span class="p">,</span><span class="w">     </span><span class="mi">5</span><span class="p">,</span><span class="w">       </span><span class="mi">9</span><span class="p">,</span><span class="w">      </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Heads Roughness&#39;</span><span class="p">,</span><span class="w">          </span><span class="mi">2</span><span class="p">,</span><span class="w">     </span><span class="mi">5</span><span class="p">,</span><span class="w">       </span><span class="mi">9</span><span class="p">,</span><span class="w">      </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Deuterated Tails SLD&#39;</span><span class="p">,</span><span class="w">    </span><span class="mf">4e-6</span><span class="p">,</span><span class="w">   </span><span class="mf">6e-6</span><span class="p">,</span><span class="w">    </span><span class="mf">2e-5</span><span class="p">,</span><span class="w">   </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Hydrogenated Tails SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.6e-6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.4e-6</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">      </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Deuterated Heads SLD&#39;</span><span class="p">,</span><span class="w">    </span><span class="mf">1e-6</span><span class="p">,</span><span class="w">   </span><span class="mf">3e-6</span><span class="p">,</span><span class="w">    </span><span class="mf">8e-6</span><span class="p">,</span><span class="w">   </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Hydrogenated Heads SLD&#39;</span><span class="p">,</span><span class="w">  </span><span class="mf">0.1e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">1.4e-6</span><span class="p">,</span><span class="w">  </span><span class="mf">3e-6</span><span class="p">,</span><span class="w">   </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">{</span><span class="s">&#39;Heads Hydration&#39;</span><span class="p">,</span><span class="w">         </span><span class="mi">0</span><span class="p">,</span><span class="w">      </span><span class="mf">0.3</span><span class="p">,</span><span class="w">     </span><span class="mf">0.5</span><span class="p">,</span><span class="w">    </span><span class="nb">true</span><span class="p">};</span>
<span class="w">    </span><span class="p">};</span>

<span class="n">problem</span><span class="p">.</span><span class="n">addParameterGroup</span><span class="p">(</span><span class="n">Parameters</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-97" name="sd-tab-set-48" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-97">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Tails Thickness&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Heads Thickness&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Tails Roughness&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Heads Roughness&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Deuterated Tails SLD&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">4e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">6e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">2e-5</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Hydrogenated Tails SLD&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mf">0.6e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mf">0.4e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Deuterated Heads SLD&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">3e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">8e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Hydrogenated Heads SLD&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.1e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.4e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">3e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Heads Hydration&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">]</span>

<span class="n">problem</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next we need to group the parameters into our layers. We need four layers in all, representing deuterated and hydrogenated versions of the heads and tails:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-98" name="sd-tab-set-49" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-98">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">H_Heads</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;Hydrogenated Heads&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Heads Thickness&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">           </span><span class="s">&#39;Hydrogenated Heads SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Heads Roughness&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">           </span><span class="s">&#39;Heads Hydration&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;bulk out&#39;</span><span class="w"> </span><span class="p">};</span>

<span class="n">D_Heads</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;Deuterated Heads&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Heads Thickness&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">           </span><span class="s">&#39;Deuterated Heads SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Heads Roughness&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">           </span><span class="s">&#39;Heads Hydration&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;bulk out&#39;</span><span class="w"> </span><span class="p">};</span>

<span class="n">D_Tails</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;Deuterated Tails&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Tails Thickness&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">           </span><span class="s">&#39;Deuterated Tails SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Tails Roughness&#39;</span><span class="p">};</span>

<span class="n">H_Tails</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;Hydrogenated Tails&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Tails Thickness&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">           </span><span class="s">&#39;Hydrogenated Tails SLD&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Tails Roughness&#39;</span><span class="p">};</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-99" name="sd-tab-set-49" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-99">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">H_Heads</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Hydrogenated Heads&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;Heads Thickness&#39;</span><span class="p">,</span>
                           <span class="n">SLD</span><span class="o">=</span><span class="s1">&#39;Hydrogenated Heads SLD&#39;</span><span class="p">,</span> <span class="n">roughness</span><span class="o">=</span><span class="s1">&#39;Heads Roughness&#39;</span><span class="p">,</span>
                           <span class="n">hydration</span><span class="o">=</span><span class="s1">&#39;Heads Hydration&#39;</span><span class="p">,</span> <span class="n">hydrate_with</span><span class="o">=</span><span class="s1">&#39;bulk out&#39;</span><span class="p">)</span>

<span class="n">D_Heads</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Deuterated Heads&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;Heads Thickness&#39;</span><span class="p">,</span>
                           <span class="n">SLD</span><span class="o">=</span><span class="s1">&#39;Deuterated Heads SLD&#39;</span><span class="p">,</span> <span class="n">roughness</span><span class="o">=</span><span class="s1">&#39;Heads Roughness&#39;</span><span class="p">,</span>
                           <span class="n">hydration</span><span class="o">=</span><span class="s1">&#39;Heads Hydration&#39;</span><span class="p">,</span> <span class="n">hydrate_with</span><span class="o">=</span><span class="s1">&#39;bulk out&#39;</span><span class="p">)</span>

<span class="n">D_Tails</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Deuterated Tails&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;Tails Thickness&#39;</span><span class="p">,</span>
                           <span class="n">SLD</span><span class="o">=</span><span class="s1">&#39;Deuterated Tails SLD&#39;</span><span class="p">,</span> <span class="n">roughness</span><span class="o">=</span><span class="s1">&#39;Tails Roughness&#39;</span><span class="p">)</span>

<span class="n">H_Tails</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Hydrogenated Tails&#39;</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="s1">&#39;Tails Thickness&#39;</span><span class="p">,</span>
                           <span class="n">SLD</span><span class="o">=</span><span class="s1">&#39;Hydrogenated Tails SLD&#39;</span><span class="p">,</span> <span class="n">roughness</span><span class="o">=</span><span class="s1">&#39;Tails Roughness&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The headgroups are hydrated and so share a hydration parameter, whereas the tails are not.</p>
</div>
<p>We now add our layers to the project:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-100" name="sd-tab-set-50" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-100">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addLayerGroup</span><span class="p">({</span><span class="n">H_Heads</span><span class="p">;</span><span class="w"> </span><span class="n">D_Heads</span><span class="p">;</span><span class="w"> </span><span class="n">H_Tails</span><span class="p">;</span><span class="w"> </span><span class="n">D_Tails</span><span class="p">});</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-101" name="sd-tab-set-50" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-101">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">H_Heads</span><span class="p">,</span> <span class="n">D_Heads</span><span class="p">,</span> <span class="n">H_Tails</span><span class="p">,</span> <span class="n">D_Tails</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>We are using two different sub-phases: D2O and ACMW. We need a different constant background for each, so we need two background parameters. There is already one background parameter in the project as a default, so we rename this and add a second one:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-102" name="sd-tab-set-51" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-102">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setBackgroundParamName</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Backs Value ACMW&#39;</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setBackgroundParamValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">5.5e-6</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addBackgroundParam</span><span class="p">(</span><span class="s">&#39;Backs Value D2O&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-8</span><span class="p">,</span><span class="w"> </span><span class="mf">2.8e-6</span><span class="p">,</span><span class="w"> </span><span class="mf">1e-5</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-103" name="sd-tab-set-51" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-103">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">background_parameters</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Backs Value ACMW&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">5.5e-6</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">background_parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Backs Value D2O&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">1e-8</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">2.8e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Use these parameters to define two constant backgrounds, again using the existing default for one of them:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-104" name="sd-tab-set-52" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-104">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addBackground</span><span class="p">(</span><span class="s">&#39;Background D2O&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;constant&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Backs Value D2O&#39;</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setBackground</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Background ACMW&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;value1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Backs Value ACMW&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-105" name="sd-tab-set-52" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-105">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">backgrounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Background D2O&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;Backs Value D2O&#39;</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">backgrounds</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Background ACMW&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;Backs Value ACMW&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We need two sub-phases for our project. D2O is already in the project as a default, so we only need to add the bulk out for ACMW</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-106" name="sd-tab-set-53" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-106">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addBulkOut</span><span class="p">(</span><span class="s">&#39;SLD ACMW&#39;</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.6e-6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.56e-6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.3e-6</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-107" name="sd-tab-set-53" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-107">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">bulk_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;SLD ACMW&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mf">0.6e-6</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mf">0.56e-6</span><span class="p">,</span> <span class="nb">max</span><span class="o">=-</span><span class="mf">0.3e-6</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now we need to add the data. We read in the two files, and put the data into the <code class="docutils literal notranslate"><span class="pre">data</span></code> block with appropriate names:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-108" name="sd-tab-set-54" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-108">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">getappdata</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;root&#39;</span><span class="p">);</span>
<span class="n">dataPath</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;/examples/miscellaneous/convertRasCAL1Project/&#39;</span><span class="p">;</span>
<span class="n">d13ACM</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">readmatrix</span><span class="p">(</span><span class="nb">fullfile</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="n">dataPath</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;d13acmw20.dat&#39;</span><span class="p">));</span>
<span class="n">d70d2O</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">readmatrix</span><span class="p">(</span><span class="nb">fullfile</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="n">dataPath</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;d70d2o20.dat&#39;</span><span class="p">));</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addData</span><span class="p">(</span><span class="s">&#39;H-tail / D-head / ACMW&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">d13ACM</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">addData</span><span class="p">(</span><span class="s">&#39;D-tail / H-head / D2O&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">d70d2O</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-109" name="sd-tab-set-54" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-109">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">d13ACM</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;d13acmw20.dat&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">d70d2O</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;d70d2o20.dat&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;H-tail / D-head / ACMW&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">d13ACM</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;D-tail / H-head / D2O&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">d70d2O</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We have everything we need to now build our contrasts. We have two contrasts in all, and we build them using name / value pairs for all the different parts of the contrasts (i.e. selecting which background and bulk phases etc we need using the names we have given them).
To define the models for each contrast, we list the names of the relevant layers as appropriate.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-110" name="sd-tab-set-55" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-110">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">addContrast</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;D-tail/H-Head/D2O&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;background&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Background D2O&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;resolution&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Resolution 1&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;scalefactor&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Scalefactor 1&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;BulkOut&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;SLD D2O&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;BulkIn&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;SLD Air&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;data&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;D-tail / H-head / D2O&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;model&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;Deuterated Tails&#39;</span><span class="p">,</span><span class="s">&#39;Hydrogenated heads&#39;</span><span class="p">});</span>

<span class="n">problem</span><span class="p">.</span><span class="n">addContrast</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;H-tail/D-Head/ACMW&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;background&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Background ACMW&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;resolution&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Resolution 1&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;scalefactor&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;Scalefactor 1&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;BulkOut&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;SLD ACMW&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;BulkIn&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;SLD Air&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;data&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;H-tail / D-head / ACMW&#39;</span><span class="p">,</span><span class="k">...</span>
<span class="w">                    </span><span class="s">&#39;model&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s">&#39;Hydrogenated Tails&#39;</span><span class="p">,</span><span class="s">&#39;Deuterated Heads&#39;</span><span class="p">});</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-111" name="sd-tab-set-55" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-111">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">contrasts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;D-tail/H-Head/D2O&#39;</span><span class="p">,</span>
                         <span class="n">background</span><span class="o">=</span><span class="s1">&#39;Background D2O&#39;</span><span class="p">,</span>
                         <span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;Resolution 1&#39;</span><span class="p">,</span>
                         <span class="n">scalefactor</span><span class="o">=</span><span class="s1">&#39;Scalefactor 1&#39;</span><span class="p">,</span>
                         <span class="n">bulk_out</span><span class="o">=</span><span class="s1">&#39;SLD D2O&#39;</span><span class="p">,</span>
                         <span class="n">bulk_in</span><span class="o">=</span><span class="s1">&#39;SLD Air&#39;</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="s1">&#39;D-tail / H-head / D2O&#39;</span><span class="p">,</span>
                         <span class="n">model</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Deuterated Tails&#39;</span><span class="p">,</span> <span class="s1">&#39;Hydrogenated Heads&#39;</span><span class="p">])</span>

<span class="n">problem</span><span class="o">.</span><span class="n">contrasts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;H-tail/D-Head/ACMW&#39;</span><span class="p">,</span>
                         <span class="n">background</span><span class="o">=</span><span class="s1">&#39;Background ACMW&#39;</span><span class="p">,</span>
                         <span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;Resolution 1&#39;</span><span class="p">,</span>
                         <span class="n">scalefactor</span><span class="o">=</span><span class="s1">&#39;Scalefactor 1&#39;</span><span class="p">,</span>
                         <span class="n">bulk_out</span><span class="o">=</span><span class="s1">&#39;SLD ACMW&#39;</span><span class="p">,</span>
                         <span class="n">bulk_in</span><span class="o">=</span><span class="s1">&#39;SLD Air&#39;</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="s1">&#39;D-tail / H-head / D2O&#39;</span><span class="p">,</span>
                         <span class="n">model</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Hydrogenated Tails&#39;</span><span class="p">,</span> <span class="s1">&#39;Deuterated Heads&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>We need to make sure that we are fitting the relevant backgrounds, scalefactors and bulk phase values:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-112" name="sd-tab-set-56" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-112">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setBackgroundParam</span><span class="p">(</span><span class="s">&#39;Backs Value ACMW&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setBackgroundParam</span><span class="p">(</span><span class="s">&#39;Backs Value D2O&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setScalefactor</span><span class="p">(</span><span class="s">&#39;Scalefactor 1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="n">problem</span><span class="p">.</span><span class="n">setBulkOut</span><span class="p">(</span><span class="s">&#39;SLD D2O&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;fit&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-113" name="sd-tab-set-56" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-113">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="o">.</span><span class="n">background_parameters</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;Backs Value ACMW&#39;</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">background_parameters</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;Backs Value D2O&#39;</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">scalefactors</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;Scalefactor 1&#39;</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">bulk_out</span><span class="o">.</span><span class="n">set_fields</span><span class="p">(</span><span class="s1">&#39;SLD D2O&#39;</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now have a look at our project, to make sure it all looks reasonable:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-114" name="sd-tab-set-57" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-114">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">disp</span><span class="p">(</span><span class="n">problem</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-115" name="sd-tab-set-57" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-115">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">problem</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-116" name="sd-tab-set-58" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-116">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>         modelType: &#39;standard layers&#39;
    experimentName: &#39;DSPC monolayers&#39;
          geometry: &#39;air/substrate&#39;


    Parameters: ---------------------------------------------------------------------------------------------- 

    p               Name               Min       Value      Max     Fit? 
    __    ________________________    ______    _______    _____    _____

     1    &quot;Substrate Roughness&quot;            1          3        5    true 
     2    &quot;Tails Thickness&quot;               10         20       30    true 
     3    &quot;Heads Thickness&quot;                3         11       16    true 
     4    &quot;Tails Roughness&quot;                2          5        9    true 
     5    &quot;Heads Roughness&quot;                2          5        9    true 
     6    &quot;Deuterated Tails SLD&quot;       4e-06      6e-06    2e-05    true 
     7    &quot;Hydrogenated Tails SLD&quot;    -6e-07     -4e-07        0    true 
     8    &quot;Deuterated Heads SLD&quot;       1e-06      3e-06    8e-06    true 
     9    &quot;Hydrogenated Heads SLD&quot;     1e-07    1.4e-06    3e-06    true 
    10    &quot;Heads Hydration&quot;                0        0.3      0.5    true 


    Bulk In: -------------------------------------------------------------------------------------------------- 

    p      Name       Min    Value    Max    Fit? 
    _    _________    ___    _____    ___    _____

    1    &quot;SLD Air&quot;     0       0       0     false


    Bulk Out: ------------------------------------------------------------------------------------------------- 

    p       Name         Min       Value        Max       Fit? 
    _    __________    _______    ________    ________    _____

    1    &quot;SLD D2O&quot;     6.2e-06    6.35e-06    6.35e-06    true 
    2    &quot;SLD ACMW&quot;     -1e-06           0       1e-06    true 


    Scalefactors: ------------------------------------------------------------------------------------------------- 

    p         Name          Min     Value    Max     Fit? 
    _    _______________    ____    _____    ____    _____

    1    &quot;Scalefactor 1&quot;    0.02    0.23     0.25    true 


    Backgrounds: ----------------------------------------------------------------------------------------------- 

    (a) Background Parameters: 

    p           Name            Min      Value      Max     Fit? 
    _    __________________    _____    _______    _____    _____

    1    &quot;Backs Value ACMW&quot;    1e-07    5.5e-06    1e-05    true 
    2    &quot;Backs Value D2O&quot;     1e-08    2.8e-06    1e-05    true 

    (b) Backgrounds:  

    p          Name              Type             Source          Value 1    Value 2    Value 3    Value 4    Value 5
    _    _________________    __________    __________________    _______    _______    _______    _______    _______

    1    &quot;Background ACMW&quot;    &quot;constant&quot;    &quot;Backs Value ACMW&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   
    2    &quot;Background D2O&quot;     &quot;constant&quot;    &quot;Backs Value D2O&quot;       &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   


    Resolutions: --------------------------------------------------------------------------------------------- 

    (a) Resolutions Parameters: 

    p           Name           Min     Value    Max     Fit? 
    _    __________________    ____    _____    ____    _____

    1    &quot;Resolution par 1&quot;    0.01    0.03     0.05    false

    (b) Resolutions:  

    p         Name            Type             Source          Value 1    Value 2    Value 3    Value 4    Value 5
    _    ______________    __________    __________________    _______    _______    _______    _______    _______

    1    &quot;Resolution 1&quot;    &quot;constant&quot;    &quot;Resolution par 1&quot;      &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;         &quot;&quot;   


    Layers: -------------------------------------------------------------------------------------------------- 

    p            Name                Thickness                  SLD                   Roughness            Hydration        Hydrate with
    _    ____________________    _________________    ________________________    _________________    _________________    ____________

    1    &quot;Hydrogenated Heads&quot;    &quot;Heads Thickness&quot;    &quot;Hydrogenated Heads SLD&quot;    &quot;Heads Roughness&quot;    &quot;Heads Hydration&quot;     &quot;bulk out&quot; 
    2    &quot;Deuterated Heads&quot;      &quot;Heads Thickness&quot;    &quot;Deuterated Heads SLD&quot;      &quot;Heads Roughness&quot;    &quot;Heads Hydration&quot;     &quot;bulk out&quot; 
    3    &quot;Hydrogenated Tails&quot;    &quot;Tails Thickness&quot;    &quot;Hydrogenated Tails SLD&quot;    &quot;Tails Roughness&quot;    &quot;&quot;                    &quot;bulk out&quot; 
    4    &quot;Deuterated Tails&quot;      &quot;Tails Thickness&quot;    &quot;Deuterated Tails SLD&quot;      &quot;Tails Roughness&quot;    &quot;&quot;                    &quot;bulk out&quot; 


    Custom Files: ------------------------------------------------------------------------------------------------------ 

    Name    Filename    Function Name    Language    Path
    ____    ________    _____________    ________    ____

     &quot;&quot;        &quot;&quot;            &quot;&quot;             &quot;&quot;        &quot;&quot; 


    Data: ------------------------------------------------------------------------------------------------------ 

              Name                       Data                  Data Range            Simulation Range   
    ________________________    ______________________    _____________________    _____________________

    &quot;Simulation&quot;                &quot;No Data&quot;                 &quot;-&quot;                      &quot;[ 0.0050 , 0.7000 ]&quot;
    &quot;H-tail / D-head / ACMW&quot;    &quot;Data array: [51 x 3]&quot;    &quot;[ 0.0518 , 0.5888 ]&quot;    &quot;[ 0.0518 , 0.5888 ]&quot;
    &quot;D-tail / H-head / D2O&quot;     &quot;Data array: [51 x 3]&quot;    &quot;[ 0.0518 , 0.5888 ]&quot;    &quot;[ 0.0518 , 0.5888 ]&quot;


   Contrasts: ----------------------------------------------------------------------------------------------- 

             p                        1                          2            
    ___________________    _______________________    ________________________

    &quot;Name&quot;                 &quot;D-tail/H-Head/D2O&quot;        &quot;H-tail/D-Head/ACMW&quot;    
    &quot;Data&quot;                 &quot;D-tail / H-head / D2O&quot;    &quot;H-tail / D-head / ACMW&quot;
    &quot;Background&quot;           &quot;Background D2O&quot;           &quot;Background ACMW&quot;       
    &quot;Background Action&quot;    &quot;add&quot;                      &quot;add&quot;                   
    &quot;Bulk in&quot;              &quot;SLD Air&quot;                  &quot;SLD Air&quot;               
    &quot;Bulk out&quot;             &quot;SLD D2O&quot;                  &quot;SLD ACMW&quot;              
    &quot;Scalefactor&quot;          &quot;Scalefactor 1&quot;            &quot;Scalefactor 1&quot;         
    &quot;Resolution&quot;           &quot;Resolution 1&quot;             &quot;Resolution 1&quot;          
    &quot;Resample&quot;             &quot;false&quot;                    &quot;false&quot;                 
    &quot;Repeat Layers&quot;        &quot;1&quot;                        &quot;1&quot;                     
    &quot;Model&quot;                &quot;Deuterated Tails&quot;         &quot;Hydrogenated Tails&quot;    
    &quot;&quot;                     &quot;Hydrogenated Heads&quot;       &quot;Deuterated Heads&quot;      
</pre></div>
</div>
</div>
<input id="sd-tab-item-117" name="sd-tab-set-58" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-117">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Name: ----------------------------------------------------------------------------------------------

DSPC monolayers

Calculation: ---------------------------------------------------------------------------------------

normal

Model: ---------------------------------------------------------------------------------------------

standard layers

Geometry: ------------------------------------------------------------------------------------------

air/substrate

Parameters: ----------------------------------------------------------------------------------------

+-------+------------------------+--------+---------+-------+------+
| index |          name          |  min   |  value  |  max  | fit  |
+-------+------------------------+--------+---------+-------+------+
|   0   |  Substrate Roughness   |  1.0   |   3.0   |  5.0  | True |
|   1   |    Tails Thickness     |  10.0  |   20.0  |  30.0 | True |
|   2   |    Heads Thickness     |  3.0   |   11.0  |  16.0 | True |
|   3   |    Tails Roughness     |  2.0   |   5.0   |  9.0  | True |
|   4   |    Heads Roughness     |  2.0   |   5.0   |  9.0  | True |
|   5   |  Deuterated Tails SLD  | 4e-06  |  6e-06  | 2e-05 | True |
|   6   | Hydrogenated Tails SLD | -6e-07 |  -4e-07 |  0.0  | True |
|   7   |  Deuterated Heads SLD  | 1e-06  |  3e-06  | 8e-06 | True |
|   8   | Hydrogenated Heads SLD | 1e-07  | 1.4e-06 | 3e-06 | True |
|   9   |    Heads Hydration     |  0.0   |   0.3   |  0.5  | True |
+-------+------------------------+--------+---------+-------+------+

Bulk In: -------------------------------------------------------------------------------------------

+-------+---------+-----+-------+-----+-------+
| index |   name  | min | value | max |  fit  |
+-------+---------+-----+-------+-----+-------+
|   0   | SLD Air | 0.0 |  0.0  | 0.0 | False |
+-------+---------+-----+-------+-----+-------+

Bulk Out: ------------------------------------------------------------------------------------------

+-------+----------+---------+----------+----------+------+
| index |   name   |   min   |  value   |   max    | fit  |
+-------+----------+---------+----------+----------+------+
|   0   | SLD D2O  | 6.2e-06 | 6.35e-06 | 6.35e-06 | True |
|   1   | SLD ACMW |  -6e-07 | -5.6e-07 |  -3e-07  | True |
+-------+----------+---------+----------+----------+------+

Scalefactors: --------------------------------------------------------------------------------------

+-------+---------------+------+-------+------+------+
| index |      name     | min  | value | max  | fit  |
+-------+---------------+------+-------+------+------+
|   0   | Scalefactor 1 | 0.02 |  0.23 | 0.25 | True |
+-------+---------------+------+-------+------+------+

Background Parameters: -----------------------------------------------------------------------------

+-------+------------------+-------+---------+-------+------+
| index |       name       |  min  |  value  |  max  | fit  |
+-------+------------------+-------+---------+-------+------+
|   0   | Backs Value ACMW | 1e-07 | 5.5e-06 | 1e-05 | True |
|   1   | Backs Value D2O  | 1e-08 | 2.8e-06 | 1e-05 | True |
+-------+------------------+-------+---------+-------+------+

Backgrounds: ---------------------------------------------------------------------------------------

+-------+-----------------+----------+------------------+
| index |       name      |   type   |      source      |
+-------+-----------------+----------+------------------+
|   0   | Background ACMW | constant | Backs Value ACMW |
|   1   |  Background D2O | constant | Backs Value D2O  |
+-------+-----------------+----------+------------------+

Resolution Parameters: -----------------------------------------------------------------------------

+-------+--------------------+------+-------+------+-------+
| index |        name        | min  | value | max  |  fit  |
+-------+--------------------+------+-------+------+-------+
|   0   | Resolution Param 1 | 0.01 |  0.03 | 0.05 | False |
+-------+--------------------+------+-------+------+-------+

Resolutions: ---------------------------------------------------------------------------------------

+-------+--------------+----------+--------------------+
| index |     name     |   type   |       source       |
+-------+--------------+----------+--------------------+
|   0   | Resolution 1 | constant | Resolution Param 1 |
+-------+--------------+----------+--------------------+

Data: ----------------------------------------------------------------------------------------------

+-------+------------------------+----------------------+---------------------+---------------------+
| index |          name          |         data         |      data range     |   simulation range  |
+-------+------------------------+----------------------+---------------------+---------------------+
|   0   |       Simulation       |          []          |          []         |     [0.005, 0.7]    |
|   1   | H-tail / D-head / ACMW | Data array: [51 x 3] | [0.051793, 0.58877] | [0.051793, 0.58877] |
|   2   | D-tail / H-head / D2O  | Data array: [51 x 3] | [0.051793, 0.58877] | [0.051793, 0.58877] |
+-------+------------------------+----------------------+---------------------+---------------------+

Layers: --------------------------------------------------------------------------------------------

+-------+--------------------+-----------------+------------------------+-----------------+-----------------+--------------+
| index |        name        |    thickness    |          SLD           |    roughness    |    hydration    | hydrate with |
+-------+--------------------+-----------------+------------------------+-----------------+-----------------+--------------+
|   0   | Hydrogenated Heads | Heads Thickness | Hydrogenated Heads SLD | Heads Roughness | Heads Hydration |   bulk out   |
|   1   |  Deuterated Heads  | Heads Thickness |  Deuterated Heads SLD  | Heads Roughness | Heads Hydration |   bulk out   |
|   2   | Hydrogenated Tails | Tails Thickness | Hydrogenated Tails SLD | Tails Roughness |                 |   bulk out   |
|   3   |  Deuterated Tails  | Tails Thickness |  Deuterated Tails SLD  | Tails Roughness |                 |   bulk out   |
+-------+--------------------+-----------------+------------------------+-----------------+-----------------+--------------+

Contrasts: -----------------------------------------------------------------------------------------

+-------+--------------------+-----------------------+-----------------+-------------------+---------+----------+---------------+--------------+----------+--------------------+
| index |        name        |          data         |    background   | background action | bulk in | bulk out |  scalefactor  |  resolution  | resample |       model        |
+-------+--------------------+-----------------------+-----------------+-------------------+---------+----------+---------------+--------------+----------+--------------------+
|   0   | D-tail/H-Head/D2O  | D-tail / H-head / D2O |  Background D2O |        add        | SLD Air | SLD D2O  | Scalefactor 1 | Resolution 1 |  False   |  Deuterated Tails  |
|       |                    |                       |                 |                   |         |          |               |              |          | Hydrogenated Heads |
|   1   | H-tail/D-Head/ACMW | D-tail / H-head / D2O | Background ACMW |        add        | SLD Air | SLD ACMW | Scalefactor 1 | Resolution 1 |  False   | Hydrogenated Tails |
|       |                    |                       |                 |                   |         |          |               |              |          |  Deuterated Heads  |
+-------+--------------------+-----------------------+-----------------+-------------------+---------+----------+---------------+--------------+----------+--------------------+
</pre></div>
</div>
</div>
</div>
<p>Now we’ll calculate this to check the agreement with the data. We need an instance of the controls class, with the procedure attribute set to <code class="docutils literal notranslate"><span class="pre">&quot;calculate&quot;</span></code> (the default):</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-118" name="sd-tab-set-59" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-118">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">controls</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">controlsClass</span><span class="p">();</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-119" name="sd-tab-set-59" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-119">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">controls</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">Controls</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-120" name="sd-tab-set-60" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-120">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  controlsClass with properties:

            parallel: &#39;single&#39;
           procedure: &#39;calculate&#39;
    calcSldDuringFit: 0
             display: &#39;iter&#39;
    resampleMinAngle: 0.9000
     resampleNPoints: 50
</pre></div>
</div>
</div>
<input id="sd-tab-item-121" name="sd-tab-set-60" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-121">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+------------------+-----------+
|     Property     |   Value   |
+------------------+-----------+
|    procedure     | calculate |
|     parallel     |   single  |
| calcSldDuringFit |   False   |
| resampleMinAngle |    0.9    |
| resampleNPoints  |     50    |
|     display      |    off    |
+------------------+-----------+
</pre></div>
</div>
</div>
</div>
<p>We then send all of this to RAT, and plot the output:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-122" name="sd-tab-set-61" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-122">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">problem</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">RAT</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span><span class="n">controls</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-123" name="sd-tab-set-61" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-123">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">controls</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-124" name="sd-tab-set-62" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-124">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Starting RAT ______________________________________________________________________________________________

Elapsed time is 0.003928 seconds.

Finished RAT ______________________________________________________________________________________________
</pre></div>
</div>
</div>
<input id="sd-tab-item-125" name="sd-tab-set-62" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-125">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-126" name="sd-tab-set-63" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-126">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="nb">clf</span><span class="p">;</span>
<span class="n">plotRefSLD</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-127" name="sd-tab-set-63" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-127">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">RAT</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">plot_ref_sld</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<img alt="Displays reflectivity and SLD plot" src="../_images/plotBeforeOptimization.png" />
<p>To do a fit, we change the <code class="docutils literal notranslate"><span class="pre">procedure</span></code> attribute of the controls class to <code class="docutils literal notranslate"><span class="pre">&quot;simplex&quot;</span></code>. We will also change the <code class="docutils literal notranslate"><span class="pre">parallel</span></code> option to <code class="docutils literal notranslate"><span class="pre">&quot;contrasts&quot;</span></code>, so that each contrast gets its own calculation thread,
and modify the output to only display the final result (rather than each iteration) by setting the <code class="docutils literal notranslate"><span class="pre">display</span></code> option to <code class="docutils literal notranslate"><span class="pre">&quot;final&quot;</span></code> and then run our fit and plot the results:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-128" name="sd-tab-set-64" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-128">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">controls</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">controlsClass</span><span class="p">();</span>
<span class="n">controls</span><span class="p">.</span><span class="n">procedure</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;simplex&#39;</span><span class="p">;</span>
<span class="n">controls</span><span class="p">.</span><span class="n">parallel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;contrasts&#39;</span><span class="p">;</span>
<span class="n">controls</span><span class="p">.</span><span class="n">display</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;final&#39;</span><span class="p">;</span>
<span class="p">[</span><span class="n">problem</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">RAT</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span><span class="w"> </span><span class="n">controls</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-129" name="sd-tab-set-64" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-129">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">controls</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">Controls</span><span class="p">(</span><span class="n">procedure</span><span class="o">=</span><span class="s1">&#39;simplex&#39;</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="s1">&#39;contrasts&#39;</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="s1">&#39;final&#39;</span><span class="p">)</span>
<span class="n">problem</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="n">RAT</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">controls</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-130" name="sd-tab-set-65" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-130">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Starting RAT ______________________________________________________________________________________________


Running simplex


Exiting: Max iterations reached
Elapsed time is 0.174717 seconds.

Finished RAT ______________________________________________________________________________________________
</pre></div>
</div>
</div>
<input id="sd-tab-item-131" name="sd-tab-set-65" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-131">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Starting RAT ───────────────────────────────────────────────────────────────────────────────────────────────────────────


Running simplex


Exiting: Max iterations reached
Elapsed time is 0.201 seconds

Finished RAT ───────────────────────────────────────────────────────────────────────────────────────────────────────────
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-132" name="sd-tab-set-66" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-132">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">disp</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-133" name="sd-tab-set-66" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-133">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="sd-tab-set tab-label-hidden docutils">
<input checked="checked" id="sd-tab-item-134" name="sd-tab-set-67" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-134">
Matlab</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>          reflectivity: {2x1 cell}
            simulation: {2x1 cell}
           shiftedData: {2x1 cell}
           backgrounds: {2x1 cell}
           resolutions: {2x1 cell}
           sldProfiles: {2x1 cell}
                layers: {2x1 cell}
       resampledLayers: {2x1 cell}
    calculationResults: [1x1 struct]
        contrastParams: [1x1 struct]
             fitParams: [2.9899 19.8114 6.7571 2.7887 ... ] (1x15 double)
              fitNames: {15x1 cell}
</pre></div>
</div>
</div>
<input id="sd-tab-item-135" name="sd-tab-set-67" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-135">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>reflectivity = [Data array: [51 x 2], Data array: [51 x 2]],
simulation = [Data array: [51 x 2], Data array: [51 x 2]],
shiftedData = [Data array: [51 x 3], Data array: [51 x 3]],
backgrounds = [Data array: [51 x 3], Data array: [51 x 3]],
resolutions = [Data array: [51 x 2], Data array: [51 x 2]],
layerSlds = [[Data array: [2 x 3]], [Data array: [2 x 3]]],
sldProfiles = [[Data array: [179 x 2]], [Data array: [179 x 2]]],
resampledLayers = [[Data array: [1 x 3]], [Data array: [1 x 3]]],
calculationResults = CalculationResults(
	chiValues = [ 9.38093098 62.84500547],
	sumChi = 72.22593645220759,
),
contrastParams = ContrastParams(
	scalefactors = [0.24983572 0.24983572],
	bulkIn = [0. 0.],
	bulkOut = [ 6.26552417e-06 -5.99472626e-07],
	subRoughs = [3.03087726 3.03087726],
	resample = [0. 0.],
),
fitParams = [ 3.03087726e+00  2.04705000e+01  8.31427150e+00  6.49767194e+00
  4.29089077e+00  7.69591087e-06 -8.87391301e-08  7.91236320e-06
  1.58987702e-06  1.38209696e-01  3.72691294e-06  3.88996743e-06
  2.49835716e-01  6.26552417e-06 -5.99472626e-07],
fitNames = [&#39;Substrate Roughness&#39;, &#39;Tails Thickness&#39;, &#39;Heads Thickness&#39;, &#39;Tails Roughness&#39;, &#39;Heads Roughness&#39;, &#39;Deuterated Tails SLD&#39;, &#39;Hydrogenated Tails SLD&#39;, &#39;Deuterated Heads SLD&#39;, &#39;Hydrogenated Heads SLD&#39;, &#39;Heads Hydration&#39;, &#39;Backs Value ACMW&#39;, &#39;Backs Value D2O&#39;, &#39;Scalefactor 1&#39;, &#39;SLD D2O&#39;, &#39;SLD ACMW&#39;],
</pre></div>
</div>
</div>
</div>
<p>We can now plot the results of our fit:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-136" name="sd-tab-set-68" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Matlab" for="sd-tab-item-136">
MATLAB</label><div class="sd-tab-content docutils">
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">figure</span><span class="p">;</span><span class="w"> </span><span class="nb">clf</span><span class="p">;</span>
<span class="n">plotRefSLD</span><span class="p">(</span><span class="n">out</span><span class="p">,</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-137" name="sd-tab-set-68" type="radio">
<label class="sd-tab-label" data-sync-group="code" data-sync-id="Python" for="sd-tab-item-137">
PYTHON</label><div class="sd-tab-content docutils">
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">RAT</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">plot_ref_sld</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<img alt="Displays reflectivity and SLD plot" src="../_images/plotAfterOptimization.png" />
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-components-of-the-project-class">The Components of the Project Class</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#project-defining-methods">Project Defining Methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-parameters-block">The Parameters Block</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-layers-block-standard-layers-models-only">The Layers Block (Standard Layers models only)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bulk-phases">Bulk Phases</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalefactors">Scalefactors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backgrounds">Backgrounds</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resolutions">Resolutions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#putting-it-all-together-defining-contrasts">Putting it all together – defining contrasts</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-monolayer-example-in-full">The Monolayer Example In Full</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2022-2025, ISIS Neutron and Muon Source.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>