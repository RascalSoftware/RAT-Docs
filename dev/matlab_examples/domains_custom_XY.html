
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Incoherent Summing with Custom XY &#8212; RAT  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=9deae167" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=881e7dcd"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'matlab_examples/domains_custom_XY';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.2';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://rascalsoftware.github.io/RAT-Docs/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Absorption (Imaginary SLD) Example" href="imaginary.html" />
    <link rel="prev" title="Incoherent Summing with Custom Layers" href="domains_custom_layers.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="RAT  documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="RAT  documentation - Home"/>`);</script>
  
  
</a></div>
    
      <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../index.html">
                        Home
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../guide.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../index.html">
                        Home
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../guide.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">
                        API Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorial/index.html">Tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/project.html">The Project Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/controls.html">A Closer Look at the Controls Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/customModels.html">Custom Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/savingOutputs.html">Copying and Saving Outputs</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">MATLAB Examples</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="DSPC_standard_layers.html">DSPC Standard Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="DSPC_custom_layers.html">DSPC Custom Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="DSPC_custom_XY.html">DSPC Custom XY</a></li>
<li class="toctree-l2"><a class="reference internal" href="domains_standard_layers.html">Incoherent Summing with Standard Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="domains_custom_layers.html">Incoherent Summing with Custom Layers</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Incoherent Summing with Custom XY</a></li>
<li class="toctree-l2"><a class="reference internal" href="imaginary.html">Absorption (Imaginary SLD) Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_r1_project.html">Converting a RasCAL-1 Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_model_languages.html">Alternative Custom Model Languages</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python_examples/index.html">Python Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/DSPC_standard_layers.html">Standard Layers Analysis of a DSPC Floating Bilayer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/DSPC_custom_layers.html">Custom Layers Example for Supported DSPC layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/DSPC_custom_xy.html">Custom XY Example for Supported DSPC layer.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/domains_standard_layers.html">Domains Samples Using Standard Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/domains_custom_layers.html">Analysing Domains Samples Using Custom Layers Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/domains_custom_XY.html">Simple example of a layer containing domains using a custom XY model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_examples/notebooks/absorption.html">Absorption (imaginary SLD) - effect below the critical edge</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../algorithms/index.html">Algorithms</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/simplex.html">Nelder-Mead Simplex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/DE.html">Differential Evolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/DREAM.html">Bayesian Analysis - DREAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms/nestedSampling.html">Bayesian Model Selection - Nested Sampling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../advanced/index.html">Advanced Topics</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced/resampling.html">Profile Resampling (‘microslicing’)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/parallelisation.html">Parallelising Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/customLanguages.html">Custom Models in Python or C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/events.html">Handling Events During Calculations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../calcTypes/index.html">Different Calculation Types</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../calcTypes/imaginary.html">Adding the Imaginary Refractive Index</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../calcTypes/domains.html">Incoherent Summing (Domains)</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../calcTypes/domainsStandardLayers.html">Standard Layers Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../calcTypes/domainsCustomModels.html">Custom Models with Domains</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../utilities/index.html">Utility Functions</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../utilities/plotFuncs.html">Basic Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/bayesPlot.html">Plotting Bayesian Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/livePlot.html">Live Updating Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utilities/conversionFuncs.html">Convert between RAT and RasCAL-1</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../guide.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">MATLAB Examples</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Incoherent...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="incoherent-summing-with-custom-xy">
<h1>Incoherent Summing with Custom XY<a class="headerlink" href="#incoherent-summing-with-custom-xy" title="Link to this heading">#</a></h1>
<p>This is an example of using incoherent summing (‘domains’) from custom XY models.</p>
<p>The domain custom XY model is similar to a normal custom models, except that the input (function arguments) of the custom function contains an additional ‘domains’ parameter as described in <a class="reference internal" href="../calcTypes/domainsCustomModels.html#domainscustommodels"><span class="std std-ref">Custom Models with Domains</span></a>.</p>
<p>This parameter tells the function which is the current domain, so the appropriate layer stack can be generated.</p>
<p>This example can be run as a script or interactively using the instructions below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The custom model used is a MATLAB model - <strong>examples/domains/customXY/domainsXY.m</strong>.</p>
</div>
<p><strong>Run Script</strong>:</p>
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">getappdata</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;root&#39;</span><span class="p">);</span>
<span class="nb">cd</span><span class="p">(</span><span class="nb">fullfile</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;examples&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;domains&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;customXY&#39;</span><span class="p">));</span>
<span class="n">domainsCustomXYScript</span>
</pre></div>
</div>
<p><strong>Run Interactively</strong>:</p>
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">getappdata</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;root&#39;</span><span class="p">);</span>
<span class="nb">cd</span><span class="p">(</span><span class="nb">fullfile</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;examples&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;domains&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;customXY&#39;</span><span class="p">));</span>
<span class="n">edit</span><span class="w"> </span><span class="s">domainsCustomXYSheet.mlx</span>
</pre></div>
</div>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB 2024a"><title>Simple example of a layer containing domains using a custom XY model</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(192, 76, 11); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.CodeBlock { background-color: #F5F5F5; margin: 10px 15px 10px 0; display: inline-block }
.S2 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 1px solid rgb(217, 217, 217); border-bottom: 0px none rgb(33, 33, 33); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S3 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 0px none rgb(33, 33, 33); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S4 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 1px solid rgb(217, 217, 217); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S5 { margin: 10px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.eoOutputWrapper { width: calc(90vw - 10px) !important; }
.S6 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 1px solid rgb(217, 217, 217); border-bottom: 1px solid rgb(217, 217, 217); border-radius: 4px 4px 0px 0px; padding: 6px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S7 { color: rgb(33, 33, 33); padding: 10px 0px 6px 17px; background: rgb(255, 255, 255) none repeat scroll 0% 0% / auto padding-box border-box; font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px; overflow-x: hidden; line-height: 17.234px;  }
/* Styling that is common to warnings and errors is in diagnosticOutput.css */.embeddedOutputsErrorElement {    min-height: 18px;    max-height: 550px;}
.embeddedOutputsErrorElement .diagnosticMessage-errorType {    overflow: auto;}
.embeddedOutputsErrorElement.activeOutput .eoOutputContent {    user-select: text;    -webkit-user-select: text;}
.embeddedOutputsErrorElement.activeOutput .eoOutputContent button {    user-select: none;    -webkit-user-select: none;}
.embeddedOutputsErrorElement .eoOutputContent ::selection {}
.embeddedOutputsErrorElement.inlineElement {}
.embeddedOutputsErrorElement.rightPaneElement {}
/* Styling that is common to warnings and errors is in diagnosticOutput.css */.embeddedOutputsWarningElement {    min-height: 18px;    max-height: 550px;}
.embeddedOutputsWarningElement .diagnosticMessage-warningType {    overflow: auto;}
.embeddedOutputsWarningElement.activeOutput .eoOutputContent {    user-select: text;    -webkit-user-select: text;}
.embeddedOutputsWarningElement .eoOutputContent ::selection {}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsWarningElement.rightPaneElement {}
/* Copyright 2015-2023 The MathWorks, Inc. *//* In this file, styles are not scoped to rtcContainer since they could be in the Dojo Tooltip */.diagnosticMessage-wrapper {    font-family: Menlo, Monaco, Consolas, "Courier New", monospace;    font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {    /*This fallback value will be used for appdesigner warnings*/    color: var(--rtc-warning-output-color, var(--mw-color-matlabWarning));}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {    /*This fallback value will be used for appdesigner warnings*/    color: var(--rtc-warning-output-color, var(--mw-color-matlabWarning));    text-decoration: underline;}
.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-warningType,.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-warningType a {    color: var(--mw-color-matlabWarning) !important;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {    /*This fallback value will be used in appdesigner error tooltip text*/    color: var(--rtc-error-output-color, var(--mw-color-matlabErrors));}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {    /*This fallback value will be used in appdesigner error tooltip text*/    color: var(--rtc-error-output-color, var(--mw-color-matlabErrors));    text-decoration: underline;}
.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-errorType,.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-errorType a {    color: var(--mw-color-matlabErrors) !important;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart,.diagnosticMessage-wrapper .diagnosticMessage-causePart {    white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {    white-space: pre;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {    white-space: pre;    word-wrap:  initial;    min-height: 18px;    max-height: 550px;}
.embeddedOutputsTextElement .textElement,.embeddedOutputsVariableStringElement .textElement {    overflow: auto;}
.embeddedOutputsTextElement.activeOutput .eoOutputContent,.embeddedOutputsVariableStringElement.activeOutput .eoOutputContent {    user-select: text;    -webkit-user-select: text;}
/*embeddedOutputsTextElement has a different dom structure than embeddedOutputsVariableStringElement.Unlike variableString, the text output has both TEXT nodes and elements as children. Hence we needa selector for each.*/.embeddedOutputsTextElement .eoOutputContent::selection,.embeddedOutputsTextElement .eoOutputContent ::selection,.embeddedOutputsVariableStringElement .eoOutputContent ::selection {}
.textElement,.rtcDataTipElement .textElement {    padding-top: 2px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement.rightPaneElement,.embeddedOutputsVariableStringElement.rightPaneElement {    min-height: 16px;}
.rightPaneElement .textElement {    padding-top: 2px;    padding-left: 9px;}
.S8 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 1px solid rgb(217, 217, 217); border-radius: 0px; padding: 0px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S9 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 1px solid rgb(217, 217, 217); border-bottom: 0px none rgb(33, 33, 33); border-radius: 0px; padding: 6px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }</style></head><body><div class = rtcContent><h1  class = 'S0'><span>Simple example of a layer containing domains using a custom XY model</span></h1><div  class = 'S1'><span>Domains custom XY models operate in the same way as custom layer models, in that there is an additional input to the custom model specifying the domain to be calculated....</span></div><div  class = 'S1'><img class = "imageNode" src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABLAAAAAhCAYAAADJVFI6AAAf7klEQVR42u1dCdhdw/m3RETErhFraosgIghqjdYS1NLYxdYgaJDY408VaVVi36WiRe3E2lK1C7EG6b8aREQiCRGERBC1TP3Ofd77vXfuzJyZOefc7977vb/nmef5vnPvuefMO++87zu/mXlnASUQCAQCgUAgEAgEAoFAIBDUMRYQEQgEAoFAIBAIBAKBQCAQCOoZQmAJBAKBQCAQCAQCgUAgEAjqGkJgCQQCgUAgEAgEAoFAIBAI6hpCYAkEAoFAIBAIBAKBQCAQCOoaQmAJyhg9enRFefnll0UoAkEk3n///ao+NWvWLBGMQCBo85gyZYp65JFHRBACgUAgEDQ5xo8fr1555ZXcfi+YwPr6K6XmzlFq/nxpjGbDAgssUFH69esnQmmD+Prrr9WcOXPUvHnzRBg/IlYWo0aNqupTDz30UNPK6Ycffkhk9d1334nSCAR11CdR8sLkyZOryjfffBP8O1tssYXq06ePNFIT+bxa6lPeet0WY68Y2ZPcY/q8QCAxb9vFeeedpzp16qQ++OCDfDiLtC/MmK5Ul8WVWnKBynJE/8YW5P+dqNSwM+PuHX5uSQbvvtNcyoUB9iGHHFJ373XjjTeqE088UZ155pl1Kzt6x2bAbrvtlujC0ksv7X3PXXfdVUXWUNl///3VxIkTG7pfLLbYYpl/o9kJrCeeeCKp41/+8peGr8u5555bbrN33nlHCcSGNnKfRMkDH374odHGh6ykwsC3a9euub2ToBifF+L/8/CNIfr01ltvRem1LUbhZezYsQ0Ve9WyL3O5n3DCCUHP+/bbb43Pw8r0tjpuEP+aT71aq40l5o2z9wsttJD617/+lf230r5w2uAW0uqgfkrdd5dS//+6UtOnNXZjoT4rLRF3rxBYtcUee+yRvNsSSyxRt7Kjd2wG5E1gobRr1049/PDDDdsvhMASZy4QG9qofbIoucYQWHfccUeh7yTIp11rRWBx3HLLLUJgtYLsSe5FEVggrXfffffyvcstt5xadNFFy4PZP//5z21y3CD+NZ96tVYbS8wbjvbt2yfPOPzww7P7qbQv7LpdiaxZtp1SX8xtHqXPQmBNf1+pMU/CKDdf0CIEljiHLATWr3/96yTIQUEgOHLkyLJR7Ny5s5o5c2ZD9gshsNqWM0f+sieffDIpslVCbGij98l6IrC222678iBWUL8+rxkJLORfobLLLrsk91999dUV17/66quGir3ylHtRBNZtt92W3LPsssuqF154IbkGOQ8fPjy5vvjii6svvviizY0bxL/mUy8hsBon5kVqIsisY8eO6vPPP8/mp9K+0HONEtnTp3dzKX0WAquZgxYhsMQ5ZCGwTjnllKrPVl111XLQg7xQjdgvhMBqW85cIDa0mfpkvRBY2EpO9/zmN7+RBqpjn9eMBBbHYYcdltz/1FNPNXTslafciyKwdthhh+Qe0yp8+r3rr7++zY0bxL/mUy8hsBoH99xzT7nPY/Igk58yPuAOpc49o1Qo/9U6K7VcQ3nAsG0ZW+suGV59/bPZpc9QXnjO/KwRw0qf4e+dtlJq202UOtZjhdkPP5R+44yTlNpkndKKscFHKTV2TOX3nnum8v1Rp2UWrryGMm1q9TOw8uyS86vLXI/8kZeOKOUL26pXqV4nDVLq7tssDctkAUAeXBavjys+aPElsEaMGKH69++vevXqpbbaais1aNAgp8JieSJmW3TMnj07+QyF45lnnlFnnHFGUtZYY43k3RZeeOHyNSpTp1Y2GPZD4zre7/vvv08My3rrrZcYuT/+8Y/q448/dr6jCfR+zz33nPH9+Dvq74eSJz777DP1hz/8IZE76vXzn/88WYp59913q7lz5xrrlSZ3Xi89iEKSQgR666+/vvrlL3+phg0bZkzA5yKw8L5ksAYPHmys1yeffJK0GdcnzNq5dCq0XgSsDEMugM0331yddNJJyfemTZumzj//fPWf//zHSWDhu2hTvCPkPm7cOO++1UwE1vPPP5/IoHfv3oksn3322VRnTm1MdsPVxghmIWfo9ZVXXqm22WYbdfHFFyefPfjgg2rPPfdUAwYMUB999FHVvW+//Xby3f32209tueWWap111lEnn3yyuv322xN9tgH9BzqgF1uiYGyFwjuiT3Dd2GSTTbx0A/0C9dD7sqkfZwXqjfeFvvft2zeRCVbCjBkzJtpe2/qXqV42+5TVhob4Ia5P+C50iutTjx49Ep3KCl13Q5+l95O0evE+ifY19UnbwIX0YsiQIYk+wM4jZ6FvcuxQAgsBq2/uG92XH3zwwV6+HND7P3Q+rf8DqAee+eWXXya+Fv1/++23T34Dvuvdd9/N9CyTbuh2Dbph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" width = "893" height = "25" alt = "functionStart.png" style = "vertical-align: baseline; width: 893px; height: 25px;"></img><span> </span></div><div  class = 'S1'><span>This is then used within the function to calculate the correct SLD profile for each contrast and domain.</span></div><div  class = 'S1'><span>In this example, we simulate a hydrogenated layer on a silicon substrate, containing domains of a larger SLD, against D2O, SMW and water.</span></div><div  class = 'S1'><span></span></div><div  class = 'S1'><span>Start by making the project and adding the parameters..</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >problem = createProject(calcType=</span><span style="color: #a709f5;">"domains"</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.modelType = </span><span style="color: #a709f5;">'custom XY'</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.geometry = </span><span style="color: #a709f5;">'substrate/liquid'</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span style="color: #008013;">% Make some parameters...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >params = {{</span><span style="color: #a709f5;">'Oxide thick'</span><span >,   10,         20,         50,     true}</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >          {</span><span style="color: #a709f5;">'Layer thick'</span><span >,   1,          30,         500,    true}</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >          {</span><span style="color: #a709f5;">'Layer SLD'</span><span >,     -0.5e-6,    -0.5e-6     0,      true}</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >          {</span><span style="color: #a709f5;">'Layer rough'</span><span >,   2,          5,          7,      true}</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >          {</span><span style="color: #a709f5;">'Domain rho '</span><span >,   1e-6,       1e-6,       5e-6,   true}};</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre"><span >problem.addParameterGroup(params);</span></span></div></div></div><div  class = 'S5'><span>..and set the SLD's of the bulk phases for our samples.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span style="color: #008013;">% Set the bulk SLD</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.setBulkIn(1,</span><span style="color: #a709f5;">'name'</span><span >,</span><span style="color: #a709f5;">'Silicon'</span><span >,</span><span style="color: #a709f5;">'Value'</span><span >,2.073e-6,</span><span style="color: #a709f5;">'max'</span><span >,2.073e-6,</span><span style="color: #a709f5;">'fit'</span><span >,false);</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span style="color: #008013;">% Add another couple of bulk-out's </span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.addBulkOut(</span><span style="color: #a709f5;">'SLD SMW'</span><span >, 2e-6, 2.073e-6, 2.1e-6);</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.addBulkOut(</span><span style="color: #a709f5;">'SLD H2O'</span><span >, -0.6e-6, -0.56e-6, -0.5e-6);</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span style="color: #008013;">% and modify scalefactor for Solid / Liquid ...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.setScalefactor(1,</span><span style="color: #a709f5;">'min'</span><span >,0.8,</span><span style="color: #a709f5;">'Value'</span><span >,1,</span><span style="color: #a709f5;">'max'</span><span >,1.1,</span><span style="color: #a709f5;">'fit'</span><span >,true);</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'>&nbsp;</div></div></div><div  class = 'S1'><span>The custom file takes the parameters and build the model as usual, changing the SLD of the layer depending on whether we are calculating the layer (domain = 1), or the domain (domain = 2).</span></div><div class="CodeBlock"><div class="inlineWrapper outputs"><div  class = 'S6'><span style="white-space: pre"><span >type </span><span style="color: #a709f5;">domainsXY</span></span></div><div  class = 'S7'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement scrollableOutput" uid="CC653208" prevent-scroll="true" data-testid="output_0" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class="textElement eoOutputContent scrollArea" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="1375" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">function [SLD, subRough] = domainsXY(params,bulk_in,bulk_out,contrast,domain)

debugPlot = false;      % optional debug plot

% Split up the parameters for convenience...
subRough = params(1);
oxideThick = params(2);
layerThick = params(3);
layerSLD = params(4);
layerRough = params(5);
domainSLD = params(6);

% Make an array of z values for our model...
z = 0:1:140;

% Make the volume fraction distribution for our Silicon substrate....
[vfSilicon, siSurf] = makeLayer(z,-25,50,1,subRough,subRough);

% ..and the Oxide....
[vfOxide, oxSurface] = makeLayer(z,siSurf,oxideThick,1,subRough,subRough);

% ..also our layer.
[vfLayer, laySurface] = makeLayer(z,oxSurface,layerThick,1,subRough,layerRough);

% Evereything that is not already occupied will be filled will water..
totalVF = vfSilicon + vfOxide + vfLayer;
vfWater = 1 - totalVF;

% Now convert the Volume Fractions to SLD's...
siSLD = vfSilicon * bulk_in;
oxSLD = vfOxide * 3.41e-6;

% Layer SLD depends on whether we are calculating the domain or not...
switch domain
    case 1
        laySLD = vfLayer * layerSLD;
    otherwise
        laySLD = vfLayer * domainSLD;
end

%...finally the water.
waterSLD = vfWater * bulk_out(contrast);

% Make the total SLD by just adding them all up..
totalSLD = siSLD + oxSLD + laySLD + waterSLD;

% The output is just a [n x 2] array of z against SLD..
SLD = [z(:) totalSLD(:)];

% (optional debug plot.....)
if debugPlot
    figure(1); clf;
    subplot(2,1,1);
    plot(z,vfSilicon(:));
    hold on
    plot(z,vfOxide(:));
    plot(z,vfLayer(:));
    plot(z,vfWater(:));
    title('Volume Fractions')

    subplot(2,1,2)
    plot(z,siSLD(:));
    hold on
    plot(z,oxSLD(:));
    plot(z,laySLD(:));
    plot(z,waterSLD(:));
    hold on
    plot(z,totalSLD,'k-','LineWidth',2);
    title('SLDs')
end

end

% -------------------------------------------------------------------------

function [VF, thisLaySurf] = makeLayer(z, prevLaySurf, thickness,....
                                 height, Sigma_L, Sigma_R)

% This procudes a layer, with a defined thickness, height and roughness.
% Each side of the layer has it's own roughness value

% Find the edges.....
l = prevLaySurf;
r = prevLaySurf + thickness;

% Make our heaviside
a = (z-l)./((2^0.5) * Sigma_L);
b = (z-r)./((2^0.5) * Sigma_R);
VF = (height/2)*(erf(a)-erf(b));

thisLaySurf = r;

end</div></div></div></div></div><div  class = 'S1'><span>Finally, add the custom file to the project, and make our three contrasts..</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: #008013;">% Add the custom file...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.addCustomFile(</span><span style="color: #a709f5;">'Domain Layer'</span><span >, </span><span style="color: #a709f5;">'domainsXY.m'</span><span >, </span><span style="color: #a709f5;">'matlab'</span><span >, pwd);</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span style="color: #008013;">% Make a contrast</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.addContrast(</span><span style="color: #a709f5;">'name'</span><span >,         </span><span style="color: #a709f5;">'D2O'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'background'</span><span >,   </span><span style="color: #a709f5;">'Background 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'resolution'</span><span >,   </span><span style="color: #a709f5;">'Resolution 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'scalefactor'</span><span >,  </span><span style="color: #a709f5;">'Scalefactor 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'Bulkin'</span><span >,       </span><span style="color: #a709f5;">'Silicon'</span><span >,</span><span style="color: #0e00ff;">...</span><span style="color: #008013;">       </span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'Bulkout'</span><span >,      </span><span style="color: #a709f5;">'SLD D2O'</span><span >,</span><span style="color: #0e00ff;">...</span><span style="color: #008013;">.           </span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'domainRatio'</span><span >,  </span><span style="color: #a709f5;">'Domain Ratio 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'data'</span><span >,         </span><span style="color: #a709f5;">'Simulation'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'model'</span><span >,        </span><span style="color: #a709f5;">'Domain Layer'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.addContrast(</span><span style="color: #a709f5;">'name'</span><span >,         </span><span style="color: #a709f5;">'SMW'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'background'</span><span >,   </span><span style="color: #a709f5;">'Background 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'resolution'</span><span >,   </span><span style="color: #a709f5;">'Resolution 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'scalefactor'</span><span >,  </span><span style="color: #a709f5;">'Scalefactor 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'Bulkin'</span><span >,       </span><span style="color: #a709f5;">'Silicon'</span><span >,</span><span style="color: #0e00ff;">...</span><span style="color: #008013;">       </span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'Bulkout'</span><span >,      </span><span style="color: #a709f5;">'SLD SMW'</span><span >,</span><span style="color: #0e00ff;">...</span><span style="color: #008013;">.           </span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'domainRatio'</span><span >,  </span><span style="color: #a709f5;">'Domain Ratio 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'data'</span><span >,         </span><span style="color: #a709f5;">'Simulation'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'model'</span><span >,        </span><span style="color: #a709f5;">'Domain Layer'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >problem.addContrast(</span><span style="color: #a709f5;">'name'</span><span >,         </span><span style="color: #a709f5;">'H2O'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'background'</span><span >,   </span><span style="color: #a709f5;">'Background 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'resolution'</span><span >,   </span><span style="color: #a709f5;">'Resolution 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'scalefactor'</span><span >,  </span><span style="color: #a709f5;">'Scalefactor 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'Bulkin'</span><span >,       </span><span style="color: #a709f5;">'Silicon'</span><span >,</span><span style="color: #0e00ff;">...</span><span style="color: #008013;">       </span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'Bulkout'</span><span >,      </span><span style="color: #a709f5;">'SLD H2O'</span><span >,</span><span style="color: #0e00ff;">...</span><span style="color: #008013;">.           </span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'domainRatio'</span><span >,  </span><span style="color: #a709f5;">'Domain Ratio 1'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'data'</span><span >,         </span><span style="color: #a709f5;">'Simulation'</span><span >,</span><span style="color: #0e00ff;">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre"><span >                    </span><span style="color: #a709f5;">'model'</span><span >,        </span><span style="color: #a709f5;">'Domain Layer'</span><span >);</span></span></div></div></div><div  class = 'S1'><span>Finally, run the simulation and plot the results....</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >controls = controlsClass();</span></span></div></div><div class="inlineWrapper"><div  class = 'S3'>&nbsp;</div></div><div class="inlineWrapper outputs"><div  class = 'S8'><span style="white-space: pre"><span >[problem, results] = RAT(problem,controls);</span></span></div><div  class = 'S7'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="8A7F33A7" prevent-scroll="true" data-testid="output_1" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="17" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Starting RAT ________________________________________________________________________________________________</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsErrorElement" uid="46A0CFE1" prevent-scroll="true" data-testid="output_2" tabindex="-1" style="width: 1145px; white-space: normal; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class="diagnosticMessage-wrapper diagnosticMessage-errorType eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="181" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="error output " style="max-height: 261px; white-space: normal; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;"><div class="diagnosticMessage-messagePart" style="white-space: pre-wrap; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;">Undefined function 'coder.internal.mxSubscript' for input arguments of type 'double'.</div><div class="diagnosticMessage-stackPart" style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;"><br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;">Error in domainsTF.customXY/processCustomFunction (line 36)<br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;"><br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;">Error in domainsTF/customXY (line 48)<br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;"><br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;">Error in reflectivityCalculation (line 70)<br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;"><br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;">Error in RATMain (line 24)<br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;"><br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;">Error in RAT (line 81)<br style="white-space: pre; font-style: normal; color: rgb(183, 49, 44); font-size: 12px;">[problemStruct,result,bayesResults] = RATMain_mex(problemStruct,problemLimits,controls);</div></div></div></div></div><div class="inlineWrapper"><div  class = 'S9'>&nbsp;</div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre"><span >plotRefSLD(problem,results);</span></span></div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% Simple example of a layer containing domains using a custom XY model
% Domains custom XY models operate in the same way as custom layer models, in 
% that there is an additional input to the custom model specifying the domain 
% to be calculated....
% 
% 
% 
% This is then used within the function to calculate the correct SLD profile 
% for each contrast and domain.
% 
% In this example, we simulate a hydrogenated layer on a silicon substrate, 
% containing domains of a larger SLD, against D2O, SMW and water.
% 
% 
%% 
% Start by making the project and adding the parameters..

problem = createProject(calcType="domains");
problem.modelType = 'custom XY';
problem.geometry = 'substrate/liquid';

% Make some parameters...
params = {{'Oxide thick',   10,         20,         50,     true}
          {'Layer thick',   1,          30,         500,    true}
          {'Layer SLD',     -0.5e-6,    -0.5e-6     0,      true}
          {'Layer rough',   2,          5,          7,      true}
          {'Domain rho ',   1e-6,       1e-6,       5e-6,   true}};

problem.addParameterGroup(params);
%% 
% ..and set the SLD's of the bulk phases for our samples.


% Set the bulk SLD
problem.setBulkIn(1,'name','Silicon','Value',2.073e-6,'max',2.073e-6,'fit',false);

% Add another couple of bulk-out's 
problem.addBulkOut('SLD SMW', 2e-6, 2.073e-6, 2.1e-6);
problem.addBulkOut('SLD H2O', -0.6e-6, -0.56e-6, -0.5e-6);

% and modify scalefactor for Solid / Liquid ...
problem.setScalefactor(1,'min',0.8,'Value',1,'max',1.1,'fit',true);

%% 
% The custom file takes the parameters and build the model as usual, changing 
% the SLD of the layer depending on whether we are calculating the layer (domain 
% = 1), or the domain (domain = 2).

type domainsXY
%% 
% Finally, add the custom file to the project, and make our three contrasts..

% Add the custom file...
problem.addCustomFile('Domain Layer', 'domainsXY.m', 'matlab', pwd);

% Make a contrast
problem.addContrast('name',         'D2O',...
                    'background',   'Background 1',...
                    'resolution',   'Resolution 1',...
                    'scalefactor',  'Scalefactor 1',...
                    'Bulkin',       'Silicon',...       
                    'Bulkout',      'SLD D2O',....           
                    'domainRatio',  'Domain Ratio 1',...
                    'data',         'Simulation',...
                    'model',        'Domain Layer');

problem.addContrast('name',         'SMW',...
                    'background',   'Background 1',...
                    'resolution',   'Resolution 1',...
                    'scalefactor',  'Scalefactor 1',...
                    'Bulkin',       'Silicon',...       
                    'Bulkout',      'SLD SMW',....           
                    'domainRatio',  'Domain Ratio 1',...
                    'data',         'Simulation',...
                    'model',        'Domain Layer');

problem.addContrast('name',         'H2O',...
                    'background',   'Background 1',...
                    'resolution',   'Resolution 1',...
                    'scalefactor',  'Scalefactor 1',...
                    'Bulkin',       'Silicon',...       
                    'Bulkout',      'SLD H2O',....           
                    'domainRatio',  'Domain Ratio 1',...
                    'data',         'Simulation',...
                    'model',        'Domain Layer');
%% 
% Finally, run the simulation and plot the results....

controls = controlsClass();

[problem, results] = RAT(problem,controls);

plotRefSLD(problem,results);
##### SOURCE END #####
-->
</div></body></html></section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2022-2025, ISIS Neutron and Muon Source.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>